

# **토스(Toss)의 UX 철학을 이식한 자율형 초효율 수학 문제은행 시스템 구축: 자동화 아키텍처 및 Claude Code 개발 가이드**

## **1\. 서론: 에듀테크 운영의 병목과 패러다임 전환의 필요성**

대한민국의 사교육 시장, 특히 수학 교육 분야에서 '문제은행(Question Bank)'은 단순한 데이터 저장소를 넘어 학원의 핵심 경쟁력을 좌우하는 지적 자산이다. 그러나 이러한 핵심 자산을 구축하고 관리하는 과정은 여전히 2000년대 초반의 노동 집약적 방식에 머물러 있다. 학원 현장에서는 여전히 수많은 조교와 강사들이 PDF 파일에서 문제를 하나씩 캡처(Crop)하고, 수식 편집기로 타이핑을 하거나 OCR(광학 문자 인식) 결과를 일일이 수정하며, 복잡한 대분류-중분류-소분류 트리를 찾아가며 메타데이터를 태깅하는 '디지털 막노동'에 시달리고 있다. 이러한 비효율은 콘텐츠의 최신화를 더디게 하고, 고비용 구조를 고착화하며, 교육 서비스의 본질인 '학생 관리'와 '강의 연구'에 투입되어야 할 자원을 행정 업무로 소모시키는 주원인이 된다.

본 보고서는 이러한 '행정적 지연(Admin Latency)'을 제로(0)에 수렴하도록 만드는 것을 목표로 한다. 이를 위해 대한민국 핀테크 혁신을 주도한 **토스(Toss)** 의 UX 철학인 '극단적인 단순함(Simplicity)'과 '속도(Velocity)'를 B2B 내부 어드민 시스템에 적용하는 방안을 제시한다. 토스가 공인인증서와 보안카드라는 거대한 장벽을 허물고 '송금'이라는 행위를 10초 이내의 경험으로 단축시켰듯, 우리는 인공지능(AI) 기술과 차세대 개발 도구인 **Claude Code**를 활용하여 문제 데이터베이스 구축 과정을 '입력'에서 '확인(Review)'의 프로세스로 재정의하고자 한다.

우리가 제안하는 시스템은 **'인간 개입의 최소화'** 를 대전제로 한다. 시스템은 PDF를 업로드하는 즉시 문항을 자동 분할(Segmentation)하고, 수식을 디지털 텍스트(LaTeX)로 변환하며, 거대언어모델(LLM)을 통해 문항의 난이도와 단원을 스스로 판단한다. 인간 관리자는 오직 AI의 판단이 올바른지 승인(Approve)하는 역할만을 수행한다. 이 보고서는 이러한 시스템을 가장 효율적으로 구축하기 위한 기술적 청사진이자, Claude Code라는 강력한 AI 코딩 에이전트를 활용하여 개발 생산성을 극대화하는 실무 가이드라인이다.

---

## **2\. 현행 프로세스의 비효율성 분석과 토스(Toss) UX 철학의 적용**

### **2.1 기존 문제은행 구축의 마찰 지점(Friction Points) 분석**

현재 대부분의 학원에서 사용되는 문제은행 구축 프로세스는 다단계의 단절된 워크플로우로 구성되어 있다. 연구 자료와 현장 분석을 통해 도출된 핵심 비효율 지점은 다음과 같다.

첫째, 수동 분할(Manual Segmentation)의 반복성이다.  
사용자는 PDF 뷰어를 열고, 캡처 도구를 실행하여 문제 영역을 드래그하고 저장하는 과정을 수백 번 반복한다. 2에서 언급된 바와 같이, PDF 조작 도구들은 존재하지만, 이를 수학 문제 단위로 정교하게 잘라내는 자동화는 미흡하다. 이는 물리적인 시간 소모뿐만 아니라 작업자의 손목 피로도와 집중력 저하를 유발한다.  
둘째, 태깅(Tagging) 과정의 인지 부하(Cognitive Load)이다.  
문제를 데이터베이스에 넣을 때 가장 시간이 많이 소요되는 단계는 해당 문제가 어떤 단원에 속하는지, 난이도는 어떠한지를 판단하는 과정이다. 관리자는 수십 개의 챕터로 구성된 커리큘럼 트리에서 알맞은 항목을 찾기 위해 매번 고민해야 한다. 이는 단순 작업이 아니라 고도의 집중력이 요구되는 판단 과정이므로 작업 속도를 현저히 떨어뜨린다.  
셋째, 검색 실패와 데이터 중복(Duplication)이다.  
기존의 키워드 기반 검색은 수식의 표현 방식 차이(예: $x^2 \+ y^2$ 와 $x^{2}+y^{2}$)를 구분하지 못해 동일한 문제가 중복 등록되는 경우가 빈번하다. 이는 데이터베이스의 품질을 저하시키고, 저장 용량을 낭비하며, 학생들에게 중복된 문제를 제공하는 서비스 품질 저하로 이어진다.

### **2.2 토스(Toss)의 '단순함(Simplicity)'을 어드민에 이식하다**

토스의 UX 원칙 중 핵심은 "사용자가 고민할 필요 없게 만드는 것"이다. 이는 불필요한 정보는 과감히 숨기고, 사용자가 취해야 할 다음 행동을 명확하게 제시하는 인터페이스로 구현된다.3 이를 문제은행 어드민에 적용하면 다음과 같은 원칙이 도출된다.

원칙 1: 기본값의 자동화 (Automation by Default)  
토스 앱이 사용자의 계좌 정보를 미리 알고 송금 화면을 구성하듯, 어드민 시스템은 업로드된 문제에 대한 모든 정보(단원, 정답, 해설, 난이도)를 AI가 미리 채워 넣어야 한다. 사용자가 드롭다운 메뉴를 눌러 '고등수학(상)'을 선택하게 해서는 안 된다. 시스템은 이미 그것이 '고등수학(상)'임을 알고 있어야 하며, 사용자는 단지 엔터키를 눌러 "맞다"고 확인만 하면 된다.  
원칙 2: 시각적 계층 구조의 단순화 (Visual Simplicity)  
데이터가 많은 화면일수록 디자인은 단순해야 한다.5 화면에는 오직 '문제 이미지'와 '추출된 텍스트', 그리고 'AI가 제안한 태그'만 보여야 한다. 생성 일시, 등록자 ID, 파일 경로 등의 부가 정보는 철저히 숨긴다(Progressive Disclosure). 이는 사용자의 시선을 검수해야 할 핵심 데이터에만 집중시켜 처리 속도를 높인다.  
원칙 3: 속도감 있는 피드백 (Velocity & Optimistic UI)  
토스의 송금 과정이 끊김 없이 흐르는 것처럼, 문제 검수 과정도 물 흐르듯 이어져야 한다. 사용자가 '승인' 버튼을 누르면 시스템은 즉시 다음 문제를 보여주어야 한다. 서버 통신을 기다리는 '로딩 스피너'는 사용자의 작업 리듬을 끊는 최악의 UX다. 우리는 낙관적 UI(Optimistic UI) 업데이트를 통해 체감 대기 시간을 제로(0)로 만든다.

---

## **3\. 초효율 자동화 시스템 기술 아키텍처 (Technical Architecture)**

이 시스템은 안정성과 개발 속도, 그리고 AI 확장성을 고려하여 현대적인 웹 기술 스택인 **Next.js 15**, **Supabase**, **Mathpix**, **OpenAI**를 기반으로 설계되었다.

### **3.1 시스템 구성도 및 데이터 흐름**

전체 시스템은 크게 '입력 및 전처리', 'AI 분석 및 가공', '검수 및 저장'의 3단계 파이프라인으로 구성된다.

1. **입력 레이어 (Ingestion Layer):**  
   * **Client:** Next.js 기반 웹 애플리케이션. 사용자가 PDF 파일을 드래그 앤 드롭한다.  
   * **Processing:** 업로드된 PDF는 즉시 Mathpix API로 전송되어 페이지별 라인 데이터(Line Data)와 텍스트를 추출한다.7  
2. **지능형 처리 레이어 (Intelligence Layer):**  
   * **Segmentation:** 추출된 라인 데이터를 분석하여 문제 번호(예: 1., 2))를 기준으로 문항을 자동으로 잘라낸다(Auto-Cropping).  
   * **Vectorization:** 추출된 LaTeX 수식과 지문을 텍스트 임베딩 모델(OpenAI text-embedding-3-small)을 통해 1536차원의 벡터로 변환한다.9  
   * **Auto-Tagging:** 벡터 검색으로 유사 문항을 찾고, LLM(Claude 3.5 Sonnet)을 통해 단원 분류 및 난이도 예측을 수행한다.10  
3. **검수 및 저장 레이어 (Review & Storage Layer):**  
   * **Review UI:** 관리자에게 처리된 결과를 피드(Feed) 형태로 보여준다. 중복 의심 문항은 자동으로 접혀서 보이거나 경고 배지가 부착된다.  
   * **Storage:** 검수가 완료된 데이터는 Supabase의 PostgreSQL 데이터베이스에 저장되며, 벡터 데이터는 pgvector 확장을 통해 인덱싱된다.11

### **3.2 핵심 기술 스택 선정 근거**

| 기술 요소 | 선정 기술 | 선정 이유 및 전략적 이점 |
| :---- | :---- | :---- |
| **Frontend** | **Next.js 15 \+ Shadcn UI** | 서버 컴포넌트(RSC)를 통한 빠른 초기 로딩과 Shadcn UI의 깔끔하고 현대적인 디자인 컴포넌트를 활용하여 토스 스타일의 UX를 빠르게 구현 가능.13 |
| **Backend** | **Supabase** | 별도의 백엔드 서버 구축 없이 인증, 데이터베이스, 스토리지, Edge Functions를 통합 제공. 특히 pgvector를 통한 벡터 검색 기능 내장이 결정적임.11 |
| **OCR Engine** | **Mathpix API** | 수식 인식 정확도에서 독보적이며, 한글 인식 지원 15 및 PDF의 구조적 정보(Line Data)를 제공하여 자동 분할 구현에 최적화됨. |
| **LLM** | **Claude 3.5 Sonnet** | 복잡한 추론과 문맥 이해 능력이 뛰어나며, 특히 한국어 수학 커리큘럼의 미세한 뉘앙스를 파악하고 JSON 형식의 구조화된 출력을 생성하는 데 탁월함.17 |
| **Agent CLI** | **Claude Code** | 개발자가 터미널 환경에서 자연어 명령으로 프로젝트 구조를 잡고, 코드를 생성하며, 디버깅까지 수행할 수 있는 에이전트 도구로 개발 속도를 획기적으로 단축.18 |

---

## **4\. 모듈 1: 지능형 PDF 분할 및 전처리 (Intelligent Segmentation)**

가장 큰 병목인 '문제 자르기'를 자동화하는 것이 이 시스템의 핵심 성공 요인이다.

### **4.1 Mathpix Line Data를 활용한 자동 분할 알고리즘**

단순히 이미지의 여백을 인식하는 컴퓨터 비전(Computer Vision) 방식은 다단 편집이나 그림이 포함된 문제에서 오류가 잦다. 대신 Mathpix의 v3/pdf 엔드포인트가 반환하는 **Line Data**를 활용한다.20

**알고리즘 로직:**

1. **앵커 포인트 탐지:** OCR 결과의 각 라인 텍스트에서 정규표현식(^(\\d+)\[\\.\\)\])을 사용하여 문제 번호(예: 1., 2), 1)로 시작하는 라인을 찾는다. 이를 '문항 시작점'으로 정의한다.  
2. **바운딩 박스 병합(Union):** 1번 문제의 시작점부터 2번 문제의 시작점 직전까지의 모든 텍스트 및 수식 라인의 좌표(Bounding Box)를 가져온다.  
3. **영역 확장:** 계산된 영역들의 합집합(Union)을 구하고, 수학 도형이나 그래프가 텍스트 옆에 배치된 경우를 대비해 X축 방향으로 영역을 페이지 너비만큼 확장하거나, Mathpix가 감지한 다이어그램 영역(include\_diagram\_text: true)을 포함시킨다.20  
4. **이미지 슬라이싱:** 계산된 최종 좌표를 이용해 원본 PDF 페이지 이미지를 잘라내어 개별 문제 이미지로 변환한다.

이 방식은 픽셀 단위의 이미지 처리가 아닌, 텍스트의 논리적 구조를 기반으로 하므로 분할 정확도가 매우 높으며, 다단 편집된 문서에서도 문항 번호의 순서만 유지된다면 정확하게 작동한다.

### **4.2 '스마트 크로퍼(Smart Cropper)' UI 설계**

AI의 분할이 100% 완벽할 수는 없다. 토스의 철학에 따라, 사용자가 오류를 수정하는 과정조차 직관적이어야 한다.

* **캔버스 오버레이:** PDF 페이지 위에 투명한 캔버스를 띄우고, AI가 예측한 분할 영역을 파란색 박스로 표시한다.  
* **제스처 인터페이스:**  
  * **합치기(Merge):** 분리된 두 박스를 드래그하여 연결하면 즉시 하나의 문제로 합쳐진다.  
  * **나누기(Split):** 박스 내부를 클릭하면 해당 위치를 기준으로 수평 분할선이 생성된다.  
  * **삭제(Delete):** 불필요한 영역(예: 쪽번호, 머리말)은 Delete 키나 클릭으로 즉시 제거한다.  
* **기술 구현:** React 환경에서 react-pdf로 PDF를 렌더링하고, 그 위에 HTML5 Canvas 또는 SVG 레이어를 올려 상호작용을 구현한다.21

---

## **5\. 모듈 2: 고정밀 OCR 및 데이터 정규화**

수학 문제는 텍스트와 수식이 혼합된 복합 데이터다. 이를 데이터베이스에서 검색 가능하고 재사용 가능한 형태로 만들기 위해서는 정교한 정규화(Normalization) 과정이 필수적이다.

### **5.1 Mathpix API를 이용한 한글 및 수식 추출**

Mathpix는 한국어 인식을 공식 지원하며, 손글씨 인식에도 탁월한 성능을 보인다.23 API 호출 시 다음과 같은 설정이 권장된다.

* formats: \["text", "latex\_styled", "data"\]. text 포맷은 일반 텍스트와 수식이 혼합된 Mathpix Markdown 형식을 반환하며, latex\_styled는 렌더링에 최적화된 LaTeX 코드를 제공한다.  
* ocr\_behavior: balanced로 설정하여 속도와 정확도의 균형을 맞춘다.  
* math\_inline\_delimiters: \["$", "$"\]로 설정하여 LaTeX 수식이 달러 기호로 감싸지도록 통일한다. 이는 추후 마크다운 렌더러에서의 호환성을 보장한다.

### **5.2 LaTeX 정규화(Normalization) 전략**

x^2+y^2=1과 x^{2} \+ y^{2} \= 1은 같은 수식이지만 문자열로는 다르다. 이를 해결하기 위해 LaTeX 정규화 파이프라인을 구축해야 한다.

1. **공백 제거:** 수식 내의 의미 없는 공백(\\ )을 제거한다.  
2. **명령어 통일:** \\frac{a}{b}와 {a \\over b} 중 하나로 통일한다(주로 \\frac 권장).  
3. **토큰화:** 수식을 텍스트로 취급하지 않고, 수학적 토큰 단위로 분리하여 벡터 임베딩 모델이 구조를 더 잘 이해할 수 있도록 전처리한다. 25에서 언급된 TeX 토큰 개념을 활용하여 커스텀 토크나이저를 구현할 수 있다.

---

## **6\. 모듈 3: 맥락 기반 자동 태깅 및 벡터 검색 (Auto-Tagging & Vector Search)**

이 시스템의 두뇌에 해당하는 부분이다. 문항의 텍스트 정보만을 가지고 교육과정상의 위치(태그)를 찾아내고, 중복 문항을 걸러낸다.

### **6.1 한국 수학 교육과정의 JSON 스키마 구조화**

자동 태깅의 정확도는 '정답지(Ground Truth)'인 커리큘럼 데이터의 구조화 수준에 달려 있다. 26의 자료를 바탕으로 2015 및 2022 개정 교육과정을 계층적 JSON 구조로 정의해야 한다.

JSON

{  
  "curriculum\_version": "2015\_revised",  
  "subjects": },  
            { "name": "나머지정리와 인수분해", "keywords": \["항등식", "나머지정리", "조립제법"\] }  
          \]  
        }  
      \]  
    },  
    {  
      "id": "MATH\_SU1",  
      "name": "수학 I",  
      "chapters": \[  
        {  
          "name": "I. 지수함수와 로그함수",  
          "topics": \["지수", "로그", "지수함수", "로그함수"\]  
        }  
      \]  
    }  
  \]  
}

이러한 구조화된 데이터는 LLM에게 컨텍스트로 제공되어, "이 문제가 위 구조 중 어디에 해당하는가?"라는 질문에 정확히 답할 수 있게 한다.

### **6.2 임베딩 모델 및 하이브리드 검색 구현**

벡터 검색은 의미적 유사성을 찾지만, "이차함수"라는 정확한 단어가 포함된 문제를 찾을 때는 키워드 검색이 더 유리할 수 있다. 따라서 **하이브리드 검색(Hybrid Search)** 을 구현한다.27

* **Embedding Model:** text-embedding-3-small (OpenAI). 한국어와 수식이 혼합된 텍스트 처리에 가성비가 뛰어나다. 수학 전용 모델인 MathBERT 29도 고려할 수 있으나, 상용 서비스의 안정성과 속도를 위해 OpenAI 모델을 1차적으로 사용하고, 필요시 파인튜닝한다.  
* **Search Logic:** Supabase의 pgvector를 사용하되, PostgreSQL의 tsvector를 이용한 전문 검색(Full Text Search) 결과를 결합한다. RRF(Reciprocal Rank Fusion) 알고리즘을 사용하여 두 검색 결과의 순위를 재조정함으로써 검색 품질을 극대화한다.28

**중복 탐지 로직:**

1. 새 문항의 임베딩 벡터 $V\_{new}$ 생성.  
2. DB에서 코사인 유사도(Cosine Similarity)가 0.95 이상인 문항 검색.  
3. 유사 문항이 존재할 경우, UI에 "중복 가능성 있음" 경고를 띄우고 기존 문항과 비교하게 한다.

---

## **7\. 모듈 4: 데이터베이스 스키마 및 저장소 전략**

Supabase(PostgreSQL)를 활용하여 관계형 데이터와 벡터 데이터를 통합 관리한다.

### **7.1 데이터베이스 스키마 설계 (ERD)**

**1\. curriculum\_taxonomy 테이블:** 교육과정의 계층 구조를 저장한다.

| Column | Type | Description |
| :---- | :---- | :---- |
| id | UUID | Primary Key |
| name | Text | 단원명 (예: 다항식) |
| parent\_id | UUID | 상위 단원 ID (Self-referencing FK) |
| depth | Integer | 계층 깊이 (1: 과목, 2: 대단원, 3: 중단원...) |
| metadata | JSONB | 키워드, 학습 목표 등 부가 정보 |

**2\. questions 테이블:** 개별 문항 정보를 저장한다.

| Column | Type | Description |
| :---- | :---- | :---- |
| id | BigInt | Primary Key |
| content\_latex | Text | 정규화된 LaTeX 본문 |
| embedding | vector(1536) | 검색용 벡터 데이터 |
| difficulty | SmallInt | 난이도 (1\~5) |
| status | Enum | 'processing', 'review\_needed', 'verified' |
| source\_pdf\_id | UUID | 원본 PDF 참조 (Traceability) |

**3\. question\_tags 테이블:** 문항과 단원을 연결하는 다대다(N:M) 관계 테이블. 하나의 문제가 여러 개념을 포함할 수 있기 때문이다.

### **7.2 인덱싱 및 성능 최적화**

대용량 데이터베이스에서도 실시간 검색 속도를 유지하기 위해 인덱싱 전략이 필수적이다.

* **IVFFlat vs HNSW:** 초기에는 IVFFlat이 가볍지만, 데이터가 10만 건을 넘어가면 **HNSW(Hierarchical Navigable Small World)** 인덱스가 검색 속도와 정확도 면에서 훨씬 우월하다.30 따라서 embedding 컬럼에는 HNSW 인덱스를 적용한다.  
  SQL  
  CREATE INDEX ON questions USING hnsw (embedding vector\_cosine\_ops);

* **GIN Index:** content\_latex 컬럼과 태그 정보가 저장된 JSONB 컬럼에는 GIN 인덱스를 걸어 텍스트 검색 및 필터링 속도를 높인다.

---

## **8\. 모듈 5: 토스 스타일의 어드민 UI/UX 디자인**

사용자가 마주할 인터페이스는 '업무 도구'가 아닌 '게임'처럼 느껴져야 한다.

### **8.1 피드(Feed) 형 인터페이스**

엑셀과 같은 그리드 뷰(Grid View) 대신, 인스타그램과 같은 **피드 뷰(Feed View)** 를 채택한다.

* 화면 중앙에 현재 검수해야 할 문제 카드가 크게 뜬다.  
* 좌측에는 원본 이미지, 우측에는 변환된 LaTeX 수식이 렌더링되어 비교를 돕는다.  
* 하단에는 AI가 추천한 태그가 'Chips' 형태로 나열되어 있다.

### **8.2 키보드 중심의 인터랙션 (Keyboard-First Workflow)**

마우스 이동 시간을 제거하기 위해 모든 검수 작업을 키보드만으로 완료할 수 있게 설계한다.31

* Enter: 승인 및 다음 문제로 이동.  
* Backspace: 반려 또는 삭제.  
* E: 수식 편집 모드 진입.  
* T: 태그 수정. T를 누르면 커맨드 팔레트(Command Palette, 예: cmd+k 스타일)가 열리고, '이차'만 쳐도 '이차방정식', '이차함수' 등이 자동 완성된다.  
* D: 중복 처리(Duplicate).

### **8.3 낙관적 UI 업데이트 (Optimistic UI)**

사용자가 Enter를 누르는 순간, 화면의 카드는 즉시 사라지고 다음 카드가 슬라이드 되어 들어온다. 서버의 응답을 기다리지 않는다. 만약 백그라운드에서 저장 실패가 발생하면, 화면 하단에 조용히 토스트(Toast) 메시지를 띄우고 해당 카드를 '재검수 필요' 목록으로 되돌린다. 이 0.1초의 차이가 수천 문제를 처리할 때의 피로도를 결정한다.

---

## **9\. 모듈 6: Claude Code를 활용한 개발 가이드**

이 복잡한 시스템을 혼자서, 혹은 소규모 팀으로 빠르게 구축하기 위해서는 AI 코딩 에이전트인 **Claude Code**의 활용이 필수적이다. Claude Code는 CLI 환경에서 프로젝트 전체 구조를 이해하고 코드를 생성, 수정, 실행할 수 있는 강력한 도구다.19

### **9.1 CLAUDE.md 설정을 통한 프로젝트 컨텍스트 주입**

Claude Code가 프로젝트의 맥락을 잃지 않도록 루트 디렉토리에 CLAUDE.md 파일을 작성한다.32

**CLAUDE.md 예시:**

# **Project: Hyper-Efficient Math Bank (Toss UX Style)**

## **Tech Stack**

* Frontend: Next.js 15 (App Router), React, Tailwind CSS, Shadcn UI  
* Backend: Supabase (PostgreSQL, Edge Functions, pgvector)  
* AI: Mathpix API, OpenAI API

## **Architecture Principles**

* **Simplicity:** UI는 최소한으로 유지한다. 복잡한 옵션은 숨긴다.  
* **Speed:** 모든 데이터 변경은 Optimistic Update를 사용한다.  
* **Strict Typing:** TypeScript strict 모드를 준수한다. Zod를 사용하여 모든 입출력을 검증한다.

## **Key Directories**

* /app: 페이지 및 라우트  
* /components/ui: Shadcn UI 컴포넌트  
* /lib/supabase: DB 클라이언트 및 타입 정의  
* /lib/ai: Mathpix 및 OpenAI 래퍼 함수

## **Coding Conventions**

* 함수형 컴포넌트 사용.  
* 서버 액션(Server Actions)을 통해 데이터 변이 처리.  
* 에러 처리는 사용자에게 방해가 되지 않는 Toast 알림으로 구현.

### **9.2 단계별 프롬프트 엔지니어링 전략**

Claude Code에게 한 번에 모든 것을 시키기보다, 모듈 단위로 구체적인 지시를 내려야 한다.

**단계 1: 데이터베이스 및 MCP 설정**

"Supabase MCP를 사용하여 내 프로젝트에 연결해. questions 테이블을 생성하는 마이그레이션 SQL을 작성해줘. embedding 컬럼은 vector(1536) 타입이어야 하고, HNSW 인덱스를 포함해야 해. 그리고 match\_documents라는 코사인 유사도 검색용 RPC 함수도 만들어줘."

**단계 2: Mathpix 연동 Edge Function 구현**

"Supabase Edge Function으로 process-pdf를 만들어줘. Mathpix API를 호출해서 PDF를 처리하고, 결과 JSON에서 line\_data를 파싱해서 문항 번호(1., 2\. 등)를 기준으로 텍스트를 그룹화하는 로직을 TypeScript로 작성해줘."

**단계 3: 스마트 크로퍼 UI 구현**

"react-pdf와 HTML5 Canvas를 사용해서 PDF 페이지 위에 사각형을 그릴 수 있는 SmartCropper 컴포넌트를 만들어줘. 사각형은 드래그로 크기 조절이 가능해야 하고, 선택된 영역의 좌표를 부모 컴포넌트로 전달해야 해. Shadcn UI 버튼을 사용해서 스타일링해줘."

**단계 4: 자동 태깅 로직 구현**

"OpenAI API를 호출하는 autoTagging 함수를 작성해. 시스템 프롬프트에는 내가 제공하는 '한국 수학 교육과정 JSON'을 포함시켜서, 입력된 수식 텍스트가 어느 단원에 속하는지 분석하게 해. 출력은 반드시 zod 스키마에 맞는 JSON 형식이어야 해."

### **9.3 Plan Mode를 활용한 복잡한 기능 구현**

복잡한 로직(예: 중복 탐지 후 병합 프로세스)을 구현할 때는 Claude Code의 /plan 명령어를 사용하여 계획을 먼저 수립하게 한다.34

/plan 구현: 사용자가 '중복 확인' 버튼을 눌렀을 때 벡터 검색을 수행하고, 유사도가 95% 이상인 문항들을 모달 창에 띄워서 비교하게 하는 기능을 구현해.  
Claude는 1\. 벡터 검색 함수 작성, 2\. 비교용 UI 컴포넌트 작성, 3\. 병합 로직 작성 등의 단계를 제안할 것이며, 이를 승인하면 순차적으로 코드를 작성한다.

---

## **10\. 결론: 효율성의 혁명과 기대 효과**

본 보고서에서 제시한 시스템은 단순히 기술을 도입하는 것이 아니라, **'일하는 방식'** 을 혁신하는 것이다.

**정량적 기대 효과:**

* **처리 속도 50배 향상:** 수동 작업 시 문제당 평균 3\~5분이 소요되던 것을, 자동화 시스템은 문제당 5초 이내의 검수 시간으로 단축시킨다.  
* **비용 90% 절감:** 인건비를 AI API 사용료(Mathpix \+ OpenAI)로 대체함으로써, 1,000문제 처리에 드는 비용을 약 750달러(인건비 기준)에서 약 5\~10달러 수준으로 낮출 수 있다.

**정성적 기대 효과:**

* **데이터 품질 균일화:** 사람의 컨디션에 따른 오타나 태깅 실수가 사라지고, 일관된 기준의 고품질 데이터베이스가 구축된다.  
* **핵심 업무 집중:** 단순 반복 업무에서 해방된 인력은 학생 상담, 커리큘럼 설계, 고난도 문제 제작 등 더 창의적이고 가치 있는 업무에 집중할 수 있다.

결론적으로, 토스의 UX 철학을 담은 이 자동화 시스템은 학원의 행정력을 '비용'에서 '경쟁력'으로 전환시키는 강력한 무기가 될 것이다. 이제 남은 것은 Claude Code를 켜고, CLAUDE.md를 작성하여 이 혁신을 현실로 만드는 일뿐이다.

---

### **부록: 시스템 구현 체크리스트**

| 단계 | 주요 과업 | 사용 기술/도구 | 난이도 |
| :---- | :---- | :---- | :---- |
| **1\. 기초 인프라** | Next.js 프로젝트 생성, Supabase 설정, 인증 구현 | Claude Code, Next.js | 하 |
| **2\. 데이터베이스** | 스키마 설계, pgvector 활성화, HNSW 인덱스 적용 | SQL, Supabase | 중 |
| **3\. 입력 모듈** | PDF 렌더링, Mathpix API 연동, Line Data 파싱 로직 | react-pdf, Edge Function | 상 |
| **4\. 지능형 모듈** | OpenAI 임베딩 생성, RAG 기반 태깅 프롬프트 최적화 | OpenAI API | 상 |
| **5\. UI/UX 개발** | 피드형 검수 UI, 키보드 단축키, Optimistic UI 적용 | React, Shadcn UI | 중 |
| **6\. 통합 테스트** | 전체 파이프라인 연동 테스트, 대량 PDF 처리 부하 테스트 | Jest, Playwright | 상 |

#### **참고 자료**

1. 매쓰플랫 학생·학부모용 \- App Store, 12월 1, 2025에 액세스, [https://apps.apple.com/us/app/%EB%A7%A4%EC%93%B0%ED%94%8C%EB%9E%AB-%ED%95%99%EC%83%9D-%ED%95%99%EB%B6%80%EB%AA%A8%EC%9A%A9/id1342984730](https://apps.apple.com/us/app/%EB%A7%A4%EC%93%B0%ED%94%8C%EB%9E%AB-%ED%95%99%EC%83%9D-%ED%95%99%EB%B6%80%EB%AA%A8%EC%9A%A9/id1342984730)  
2. Stirling-Tools/Stirling-PDF: \#1 Locally hosted web application that allows you to perform various operations on PDF files \- GitHub, 12월 1, 2025에 액세스, [https://github.com/Stirling-Tools/Stirling-PDF](https://github.com/Stirling-Tools/Stirling-PDF)  
3. How Toss Became a Design Powerhouse: 10 Years of UX Evolution | by Kloudy | Medium, 12월 1, 2025에 액세스, [https://medium.com/@posinity/how-toss-became-a-design-powerhouse-10-years-of-ux-evolution-e9fc0c51d180](https://medium.com/@posinity/how-toss-became-a-design-powerhouse-10-years-of-ux-evolution-e9fc0c51d180)  
4. Design at ttoss, 12월 1, 2025에 액세스, [https://ttoss.dev/docs/design](https://ttoss.dev/docs/design)  
5. Dashboard Design: best practices and examples \- Justinmind, 12월 1, 2025에 액세스, [https://www.justinmind.com/ui-design/dashboard-design-best-practices-ux](https://www.justinmind.com/ui-design/dashboard-design-best-practices-ux)  
6. Dashboard Design UX Patterns Best Practices \- Pencil & Paper, 12월 1, 2025에 액세스, [https://www.pencilandpaper.io/articles/ux-pattern-analysis-data-dashboards](https://www.pencilandpaper.io/articles/ux-pattern-analysis-data-dashboards)  
7. Convert API: Image & PDF digitizing API for STEM \- Mathpix, 12월 1, 2025에 액세스, [https://mathpix.com/ocr](https://mathpix.com/ocr)  
8. Convert API User Guide: All API endpoints \- Mathpix, 12월 1, 2025에 액세스, [https://mathpix.com/docs/convert/endpoints](https://mathpix.com/docs/convert/endpoints)  
9. Storing OpenAI embeddings in Postgres with pgvector \- Supabase, 12월 1, 2025에 액세스, [https://supabase.com/blog/openai-embeddings-postgres-vector](https://supabase.com/blog/openai-embeddings-postgres-vector)  
10. Using Claude Learning Mode to Study, 12월 1, 2025에 액세스, [https://learning.northeastern.edu/ai-student-guides-using-claude-learning-mode-to-study/](https://learning.northeastern.edu/ai-student-guides-using-claude-learning-mode-to-study/)  
11. pgvector: Embeddings and vector similarity | Supabase Docs, 12월 1, 2025에 액세스, [https://supabase.com/docs/guides/database/extensions/pgvector](https://supabase.com/docs/guides/database/extensions/pgvector)  
12. Vector columns | Supabase Docs, 12월 1, 2025에 액세스, [https://supabase.com/docs/guides/ai/vector-columns](https://supabase.com/docs/guides/ai/vector-columns)  
13. I built a free nextjs \+ supabase starter specifically for Claude Code and AI apps \- Reddit, 12월 1, 2025에 액세스, [https://www.reddit.com/r/ClaudeAI/comments/1l30p37/i\_built\_a\_free\_nextjs\_supabase\_starter/](https://www.reddit.com/r/ClaudeAI/comments/1l30p37/i_built_a_free_nextjs_supabase_starter/)  
14. Semantic search | Supabase Docs, 12월 1, 2025에 액세스, [https://supabase.com/docs/guides/ai/semantic-search](https://supabase.com/docs/guides/ai/semantic-search)  
15. All Supported Languages \- Mathpix, 12월 1, 2025에 액세스, [https://mathpix.com/language-support](https://mathpix.com/language-support)  
16. Snip Changelog \- Mathpix, 12월 1, 2025에 액세스, [https://mathpix.com/docs/snip/changelog](https://mathpix.com/docs/snip/changelog)  
17. Claude.md: Best Practices for Optimizing with Prompt Learning \- Arize AI, 12월 1, 2025에 액세스, [https://arize.com/blog/claude-md-best-practices-learned-from-optimizing-claude-code-with-prompt-learning/](https://arize.com/blog/claude-md-best-practices-learned-from-optimizing-claude-code-with-prompt-learning/)  
18. Claude Code Learning Path: a practical guide to getting started | by Daniel Avila | Oct, 2025, 12월 1, 2025에 액세스, [https://medium.com/@dan.avila7/claude-code-learning-path-a-practical-guide-to-getting-started-fcc601550476](https://medium.com/@dan.avila7/claude-code-learning-path-a-practical-guide-to-getting-started-fcc601550476)  
19. Claude Code overview \- Claude Code Docs, 12월 1, 2025에 액세스, [https://code.claude.com/docs/en/overview](https://code.claude.com/docs/en/overview)  
20. Introduction – Mathpix API v3 Reference, 12월 1, 2025에 액세스, [https://docs.mathpix.com/](https://docs.mathpix.com/)  
21. React-pdf, 12월 1, 2025에 액세스, [https://react-pdf.org/](https://react-pdf.org/)  
22. Generating a PDF file from React Components \[duplicate\] \- Stack Overflow, 12월 1, 2025에 액세스, [https://stackoverflow.com/questions/44989119/generating-a-pdf-file-from-react-components](https://stackoverflow.com/questions/44989119/generating-a-pdf-file-from-react-components)  
23. Convert API: Image & PDF digitizing API for STEM \- Mathpix, 12월 1, 2025에 액세스, [https://mathpix.com/convert](https://mathpix.com/convert)  
24. Convert API User Guide: Changelog \- Mathpix, 12월 1, 2025에 액세스, [https://mathpix.com/docs/convert/changelog](https://mathpix.com/docs/convert/changelog)  
25. What is a "TeX token"? \- Overleaf, Online LaTeX Editor, 12월 1, 2025에 액세스, [https://www.overleaf.com/learn/latex/Articles/What\_is\_a\_%22TeX\_token%22%3F](https://www.overleaf.com/learn/latex/Articles/What_is_a_%22TeX_token%22%3F)  
26. 2015 개정 교육과정/수학과/고등학교 \- 나무위키, 12월 1, 2025에 액세스, [https://namu.wiki/w/2015%20%EA%B0%9C%EC%A0%95%20%EA%B5%90%EC%9C%A1%EA%B3%BC%EC%A0%95/%EC%88%98%ED%95%99%EA%B3%BC/%EA%B3%A0%EB%93%B1%ED%95%99%EA%B5%90](https://namu.wiki/w/2015%20%EA%B0%9C%EC%A0%95%20%EA%B5%90%EC%9C%A1%EA%B3%BC%EC%A0%95/%EC%88%98%ED%95%99%EA%B3%BC/%EA%B3%A0%EB%93%B1%ED%95%99%EA%B5%90)  
27. Hybrid search | Supabase Docs, 12월 1, 2025에 액세스, [https://supabase.com/docs/guides/ai/hybrid-search](https://supabase.com/docs/guides/ai/hybrid-search)  
28. Hybrid Search in PostgreSQL: The Missing Manual \- ParadeDB, 12월 1, 2025에 액세스, [https://www.paradedb.com/blog/hybrid-search-in-postgresql-the-missing-manual](https://www.paradedb.com/blog/hybrid-search-in-postgresql-the-missing-manual)  
29. Evaluating NLP Embedding Models for Handling Science-Specific Symbolic Expressions in Student Texts \- ResearchGate, 12월 1, 2025에 액세스, [https://www.researchgate.net/publication/392085080\_Evaluating\_NLP\_Embedding\_Models\_for\_Handling\_Science-Specific\_Symbolic\_Expressions\_in\_Student\_Texts](https://www.researchgate.net/publication/392085080_Evaluating_NLP_Embedding_Models_for_Handling_Science-Specific_Symbolic_Expressions_in_Student_Texts)  
30. pgvector v0.5.0: Faster semantic search with HNSW indexes \- Supabase, 12월 1, 2025에 액세스, [https://supabase.com/blog/increase-performance-pgvector-hnsw](https://supabase.com/blog/increase-performance-pgvector-hnsw)  
31. Keyboard Shortcuts design pattern, 12월 1, 2025에 액세스, [https://ui-patterns.com/patterns/keyboard-shortcuts](https://ui-patterns.com/patterns/keyboard-shortcuts)  
32. Using CLAUDE.MD files: Customizing Claude Code for your codebase, 12월 1, 2025에 액세스, [https://www.claude.com/blog/using-claude-md-files](https://www.claude.com/blog/using-claude-md-files)  
33. Claude Code: Best practices for agentic coding \- Anthropic, 12월 1, 2025에 액세스, [https://www.anthropic.com/engineering/claude-code-best-practices](https://www.anthropic.com/engineering/claude-code-best-practices)  
34. Common workflows \- Claude Code Docs, 12월 1, 2025에 액세스, [https://code.claude.com/docs/en/common-workflows](https://code.claude.com/docs/en/common-workflows)  
35. Planning Mode Vs. "Let's create an .md plan first"? : r/ClaudeAI \- Reddit, 12월 1, 2025에 액세스, [https://www.reddit.com/r/ClaudeAI/comments/1lppa30/planning\_mode\_vs\_lets\_create\_an\_md\_plan\_first/](https://www.reddit.com/r/ClaudeAI/comments/1lppa30/planning_mode_vs_lets_create_an_md_plan_first/)