# UX 연구 리포트: 문서 선택기 확장성 문제와 대안

> **작성일**: 2025-12-03
> **목적**: 문서 수가 증가할 때 드롭다운 UI의 한계 분석 및 대안 제시
> **연구 방법**: 경쟁사 분석, UX 패턴 연구, 사용자 시나리오 분석

---

## 1. 문제 정의

### 1.1 현재 상황
```
┌─────────────────────────────────────┐
│  문제 문서 ▼                         │
│  ┌─────────────────────────────┐    │
│  │ 고1_수학의바이블_문제.pdf    │    │
│  │ 고1_수학의바이블_해설.pdf    │    │  ← 10개 이하: OK
│  │ 고2_미적분_문제.pdf         │    │
│  │ ...                         │    │
│  └─────────────────────────────┘    │
└─────────────────────────────────────┘
```

### 1.2 예상 문제 시나리오
| 문서 수 | 사용자 경험 |
|---------|-------------|
| 1-10개 | 😊 드롭다운 적합 |
| 11-30개 | 😐 스크롤 필요, 탐색 시간 증가 |
| 31-100개 | 😣 찾기 어려움, 실수 가능성 |
| 100개+ | 😫 사실상 사용 불가 |

### 1.3 핵심 질문
> "50개 이상의 문서 중에서 원하는 문제-해설 쌍을 빠르게 선택하려면?"

---

## 2. 경쟁사 및 유사 서비스 분석

### 2.1 Google Drive / Dropbox
**패턴**: 폴더 기반 계층 + 검색

```
┌─────────────────────────────────────┐
│ 🔍 파일 검색...                      │
├─────────────────────────────────────┤
│ 📁 최근 항목                         │
│    └─ 고1_수학의바이블_문제.pdf      │
│    └─ 고1_수학의바이블_해설.pdf      │
├─────────────────────────────────────┤
│ 📁 고등학교 1학년                    │
│    └─ 📁 수학의바이블                │
│    └─ 📁 쎈                         │
├─────────────────────────────────────┤
│ 📁 고등학교 2학년                    │
└─────────────────────────────────────┘
```

**장점**: 계층 구조로 정리, 검색 지원
**단점**: 폴더 관리 오버헤드

### 2.2 Notion / Figma
**패턴**: 검색 중심 + 최근 항목

```
┌─────────────────────────────────────┐
│ 🔍 수학의바이블                      │ ← 타이핑하면
├─────────────────────────────────────┤
│ ✨ 최근 열람                         │
│    고1_수학의바이블_문제.pdf         │
├─────────────────────────────────────┤
│ 🔎 검색 결과                         │
│    고1_수학의바이블_문제.pdf         │
│    고1_수학의바이블_해설.pdf         │
│    고2_수학의바이블_문제.pdf         │
└─────────────────────────────────────┘
```

**장점**: 빠른 검색, 최근 항목 우선
**단점**: 검색어를 알아야 함

### 2.3 VS Code (파일 선택)
**패턴**: Fuzzy Search + 키보드 탐색

```
┌─────────────────────────────────────┐
│ > 수바문                            │ ← Fuzzy match
├─────────────────────────────────────┤
│   수학의바이블_문제.pdf             │ ← 하이라이트
│   수학의바이블_해설.pdf             │
│   수학비서_문제.pdf                 │
└─────────────────────────────────────┘
```

**장점**: 부분 일치, 오타 허용
**단점**: 학습 곡선

### 2.4 Slack (채널/DM 선택)
**패턴**: 최근 + 즐겨찾기 + 검색

```
┌─────────────────────────────────────┐
│ ⭐ 자주 사용                         │
│    고1_수학의바이블                  │
│    고2_미적분                        │
├─────────────────────────────────────┤
│ 🕐 최근 사용                         │
│    고1_쎈_문제.pdf                   │
├─────────────────────────────────────┤
│ 🔍 검색으로 더 찾기...               │
└─────────────────────────────────────┘
```

**장점**: 사용 패턴 기반 추천
**단점**: 새 파일은 찾기 어려움

---

## 3. UX 패턴 분석

### 3.1 패턴별 적합성 매트릭스

| 패턴 | 소량 (10-) | 중량 (10-50) | 대량 (50+) | 구현 난이도 |
|------|-----------|-------------|-----------|------------|
| **드롭다운** | ⭐⭐⭐ | ⭐⭐ | ⭐ | 낮음 |
| **검색 + 드롭다운** | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ | 중간 |
| **Combobox (검색형)** | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 중간 |
| **최근 + 전체 탭** | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 중간 |
| **폴더 계층** | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 높음 |
| **태그 필터** | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 높음 |
| **스마트 추천** | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 매우 높음 |

### 3.2 권장 패턴: **Searchable Combobox**

```
사용자 시나리오:
1. 클릭 → 최근 문서 5개 표시
2. 타이핑 → 실시간 필터링
3. Enter → 선택 완료

┌─────────────────────────────────────┐
│ 🔍 문제 문서 검색...        [▼]     │ ← 검색 가능한 입력
├─────────────────────────────────────┤
│ 🕐 최근 사용                         │
│    ✓ 고1_수학의바이블_문제.pdf       │
│      고1_쎈_문제.pdf                 │
├─────────────────────────────────────┤
│ 📄 모든 문서 (47개)                  │
│      고1_개념원리_문제.pdf           │
│      고1_기출문제_문제.pdf           │
│      ...                            │
└─────────────────────────────────────┘
```

---

## 4. 권장 대안: Searchable Combobox with Smart Sections

### 4.1 디자인 목표

```
┌───────────────────────────────────────────────────────────┐
│  1. 소량일 때: 기존 드롭다운처럼 동작                        │
│  2. 대량일 때: 검색 + 섹션으로 빠른 탐색                     │
│  3. 학습 곡선: 제로 (클릭만으로 사용 가능)                   │
└───────────────────────────────────────────────────────────┘
```

### 4.2 상세 설계

#### A. 기본 상태 (닫힘)
```
┌─────────────────────────────────────┐
│ 📄 문제 문서                         │
│    선택하세요                    [▼] │
└─────────────────────────────────────┘
```

#### B. 열린 상태 (문서 적음: 10개 이하)
```
┌─────────────────────────────────────┐
│ 📄 문제 문서                         │
│    선택하세요                    [▲] │
├─────────────────────────────────────┤
│   고1_수학의바이블_문제.pdf          │
│   고1_쎈_문제.pdf                    │
│   고2_미적분_문제.pdf                │
│   ...                               │
└─────────────────────────────────────┘
```
→ 기존 드롭다운과 동일하게 작동

#### C. 열린 상태 (문서 많음: 10개 초과)
```
┌─────────────────────────────────────┐
│ 🔍 검색...                          │ ← 검색창 자동 표시
├─────────────────────────────────────┤
│ ⭐ 최근 사용                         │
│    고1_수학의바이블_문제.pdf   [선택]│
│    고2_미적분_문제.pdf              │
├─────────────────────────────────────┤
│ 📁 고등학교 1학년 (12개)        [▶] │ ← 그룹 접기/펼치기
│ 📁 고등학교 2학년 (8개)         [▶] │
│ 📁 고등학교 3학년 (5개)         [▶] │
├─────────────────────────────────────┤
│ 📄 기타 (22개)                  [▶] │
└─────────────────────────────────────┘
```

#### D. 검색 중
```
┌─────────────────────────────────────┐
│ 🔍 수학의바                         │ ← 타이핑 중
├─────────────────────────────────────┤
│ 검색 결과 (3개)                      │
│   고1_[수학의바]이블_문제.pdf        │ ← 하이라이트
│   고2_[수학의바]이블_문제.pdf        │
│   고3_[수학의바]이블_문제.pdf        │
└─────────────────────────────────────┘
```

### 4.3 스마트 기능

#### 1. 자동 페어링 추천
```
문제 문서 선택 시:
┌─────────────────────────────────────┐
│ ✨ 추천 해설                         │
│    고1_수학의바이블_해설.pdf    [자동선택]
│    (문제와 같은 시리즈)              │
└─────────────────────────────────────┘
```

파일명 패턴 분석:
- `{시리즈}_문제.pdf` → `{시리즈}_해설.pdf` 자동 추천
- 같은 폴더 내 문서 우선

#### 2. 파일명 기반 자동 그룹핑
```javascript
// 파일명 패턴 분석
"고1_수학의바이블_문제.pdf" → {
  grade: "고1",
  series: "수학의바이블",
  type: "문제"
}

// 자동 그룹 생성
groups = {
  "고등학교 1학년": ["고1_*"],
  "고등학교 2학년": ["고2_*"],
  ...
}
```

#### 3. 최근 사용 + 자주 사용 학습
```javascript
// 사용 패턴 저장 (localStorage)
recentDocuments = [
  { id: "doc1", usedAt: "2025-12-03", count: 5 },
  { id: "doc2", usedAt: "2025-12-02", count: 12 },
]

// 표시 우선순위
1. 자주 사용 (count 기준)
2. 최근 사용 (usedAt 기준)
3. 알파벳 순
```

---

## 5. 대안 비교

### 5.1 Option A: 검색형 Combobox (권장)

```
장점:
✅ 구현 난이도 중간
✅ 학습 곡선 낮음 (클릭으로 시작)
✅ 소량/대량 모두 대응
✅ 기존 드롭다운과 자연스러운 전환

단점:
⚠️ 검색 품질에 따라 UX 좌우
⚠️ 그룹핑 로직 필요
```

**구현 예상 시간**: 2-3시간

### 5.2 Option B: 모달 파일 선택기

```
┌─────────────────────────────────────────┐
│ 문서 선택                          [X] │
├─────────────────────────────────────────┤
│ 🔍 검색...                              │
├──────────────┬──────────────────────────┤
│ 📁 폴더      │ 📄 파일                  │
│              │                          │
│ > 고1        │ 수학의바이블_문제.pdf    │
│   고2        │ 쎈_문제.pdf              │
│   고3        │ 개념원리_문제.pdf        │
│              │                          │
└──────────────┴──────────────────────────┘
```

```
장점:
✅ 넓은 공간 활용
✅ 폴더 탐색 가능
✅ 복잡한 필터링 가능

단점:
⚠️ 추가 클릭 필요 (모달 열기)
⚠️ 흐름 끊김
⚠️ 구현 복잡도 높음
```

**구현 예상 시간**: 4-5시간

### 5.3 Option C: 2단계 선택 (시리즈 → 문서)

```
Step 1: 시리즈 선택
┌─────────────────────────────────────┐
│ 📚 시리즈 선택                  [▼] │
│    수학의바이블                      │
└─────────────────────────────────────┘

Step 2: 문서 선택 (필터링됨)
┌─────────────────────────────────────┐
│ 📄 문제 문서                    [▼] │
│    고1_수학의바이블_문제.pdf         │
│    고2_수학의바이블_문제.pdf         │
└─────────────────────────────────────┘
```

```
장점:
✅ 점진적 탐색
✅ 구현 간단

단점:
⚠️ 추가 클릭 필요
⚠️ 시리즈 분류 로직 필요
⚠️ 시리즈가 없는 파일 처리
```

**구현 예상 시간**: 2시간

### 5.4 Option D: 카드 그리드 선택

```
┌─────────────────────────────────────────────────────┐
│ 🔍 검색...                           [필터 ▼]      │
├─────────────────────────────────────────────────────┤
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐    │
│ │📄       │ │📄       │ │📄       │ │📄       │    │
│ │수학의   │ │쎈       │ │개념원리 │ │기출문제 │    │
│ │바이블   │ │         │ │         │ │         │    │
│ │고1      │ │고1      │ │고1      │ │고1      │    │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘    │
│ ┌─────────┐ ┌─────────┐ ...                        │
└─────────────────────────────────────────────────────┘
```

```
장점:
✅ 시각적 탐색
✅ 썸네일 표시 가능
✅ 대량 문서 브라우징

단점:
⚠️ 공간 많이 차지
⚠️ 모바일 비친화적
⚠️ 현재 Hero 섹션 디자인과 충돌
```

**구현 예상 시간**: 4시간

---

## 6. 최종 권장안

### 6.1 단기 (Phase 34.5): 검색형 Combobox

**구현 범위**:
1. 10개 초과 시 검색창 자동 표시
2. 최근 사용 문서 상단 표시 (최대 5개)
3. 실시간 필터링 (debounce 300ms)
4. 키보드 탐색 (↑↓ Enter Esc)

```tsx
// 컴포넌트 구조
<SearchableDocumentSelector
  type="problem" | "solution"
  value={selectedDoc}
  onChange={setSelectedDoc}
  documents={documents}
  recentDocuments={recentDocs}  // 새로 추가
  disabledValue={otherSelected}
/>
```

**예상 시간**: 2-3시간

### 6.2 중기 (Phase 35+): 스마트 기능 추가

1. **자동 페어링 추천**
   - 문제 선택 시 해설 자동 추천
   - 파일명 패턴 매칭

2. **자동 그룹핑**
   - 파일명에서 학년/시리즈 추출
   - 그룹별 섹션 표시

3. **사용 패턴 학습**
   - localStorage에 사용 이력 저장
   - 자주 사용하는 문서 우선 표시

---

## 7. 구현 가이드 (Phase 34.5)

### 7.1 SearchableDocumentSelector 설계

```tsx
interface SearchableDocumentSelectorProps {
  type: 'problem' | 'solution';
  value: string | null;
  onChange: (docId: string | null) => void;
  disabledValue: string | null;
}

function SearchableDocumentSelector(props: Props) {
  const [isOpen, setIsOpen] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const { data: documents } = useDocuments();

  // 최근 사용 문서 (localStorage)
  const recentDocs = useRecentDocuments(props.type);

  // 검색 필터링
  const filteredDocs = useMemo(() => {
    if (!searchQuery) return documents;
    return documents?.filter(doc =>
      doc.document_id.toLowerCase().includes(searchQuery.toLowerCase())
    );
  }, [documents, searchQuery]);

  // 검색창 표시 여부 (10개 초과 시)
  const showSearch = (documents?.length || 0) > 10;

  return (
    <div className="relative">
      {/* Trigger Button */}
      <button onClick={() => setIsOpen(!isOpen)}>
        {/* ... */}
      </button>

      {/* Dropdown */}
      {isOpen && (
        <div className="dropdown">
          {/* 검색창 (조건부) */}
          {showSearch && (
            <input
              type="text"
              placeholder="검색..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              autoFocus
            />
          )}

          {/* 최근 사용 섹션 */}
          {recentDocs.length > 0 && !searchQuery && (
            <Section title="최근 사용">
              {recentDocs.map(doc => <DocItem key={doc.id} />)}
            </Section>
          )}

          {/* 검색 결과 / 전체 목록 */}
          <Section title={searchQuery ? "검색 결과" : "모든 문서"}>
            {filteredDocs?.map(doc => <DocItem key={doc.id} />)}
          </Section>
        </div>
      )}
    </div>
  );
}
```

### 7.2 최근 사용 문서 훅

```tsx
function useRecentDocuments(type: 'problem' | 'solution') {
  const key = `recent_${type}_documents`;

  const [recent, setRecent] = useState<string[]>(() => {
    const saved = localStorage.getItem(key);
    return saved ? JSON.parse(saved) : [];
  });

  const addRecent = useCallback((docId: string) => {
    setRecent(prev => {
      const filtered = prev.filter(id => id !== docId);
      const updated = [docId, ...filtered].slice(0, 5);  // 최대 5개
      localStorage.setItem(key, JSON.stringify(updated));
      return updated;
    });
  }, [key]);

  return { recent, addRecent };
}
```

---

## 8. 결론

### 핵심 인사이트

| 상황 | 권장 패턴 |
|------|----------|
| 문서 10개 이하 | 현재 드롭다운 유지 |
| 문서 10-50개 | 검색형 Combobox + 최근 사용 |
| 문서 50개 이상 | 검색 + 그룹핑 + 자동 추천 |

### 액션 아이템

1. **즉시 (Phase 34.5)**: 검색형 Combobox 구현
2. **단기**: 최근 사용 문서 기능 추가
3. **중기**: 파일명 기반 자동 그룹핑
4. **장기**: AI 기반 페어링 추천

### ROI 분석

| 기능 | 구현 시간 | 사용자 가치 | 우선순위 |
|------|----------|------------|----------|
| 검색 필터링 | 1시간 | ⭐⭐⭐ | 🔴 높음 |
| 최근 사용 | 1시간 | ⭐⭐⭐ | 🔴 높음 |
| 키보드 탐색 | 30분 | ⭐⭐ | 🟡 중간 |
| 자동 그룹핑 | 2시간 | ⭐⭐ | 🟡 중간 |
| 자동 페어링 | 1시간 | ⭐⭐⭐ | 🔴 높음 |

---

*리포트 작성: Claude Code (Opus)*
*최종 업데이트: 2025-12-03*
