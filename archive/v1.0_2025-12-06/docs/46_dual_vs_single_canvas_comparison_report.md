# 듀얼 윈도우 vs 싱글 캔버스 탭 시스템 비교 분석

**작성일**: 2025-12-03
**요청자**: 사용자
**분석 유형**: 아키텍처 비교 및 구현 가능성 분석

---

## 1. 시스템 비교 개요

### 1.1 현재: 듀얼 윈도우 시스템 (Phase 22)
```
┌─────────────────────┐     ┌─────────────────────┐
│   문제 창 (왼쪽)     │     │   해설 창 (오른쪽)    │
│                     │     │                     │
│  ┌───────────────┐  │     │  ┌───────────────┐  │
│  │  PDF 캔버스   │  │     │  │  PDF 캔버스   │  │
│  │   (문제)      │  │◄────►│   (해설)       │  │
│  └───────────────┘  │     │  └───────────────┘  │
│                     │     │                     │
│  그룹 패널          │     │  그룹 패널          │
│  매칭 패널          │     │  매칭 패널          │
└─────────────────────┘     └─────────────────────┘
         │                           │
         └───── BroadcastChannel ────┘
                  (실시간 동기화)
```

### 1.2 제안: 싱글 캔버스 탭 시스템
```
┌──────────────────────────────────────────────────┐
│  [문제 탭] [해설 탭]                              │
├──────────────────────────────────────────────────┤
│  ┌─────────────────────┬──────────────────────┐  │
│  │                     │                      │  │
│  │    PDF 캔버스       │    작업 패널          │  │
│  │  (문제 또는 해설)    │  ┌────────────────┐  │  │
│  │                     │  │ 문제 목록       │  │  │
│  │                     │  │ ┌────────────┐ │  │  │
│  │                     │  │ │ 1번 ⬤     │ │  │  │
│  │                     │  │ │ 2번 ○     │ │  │  │
│  │                     │  │ │ 3번 ○     │ │  │  │
│  │                     │  │ └────────────┘ │  │  │
│  │                     │  │                │  │  │
│  │                     │  │ [해설 연결]    │  │  │
│  │                     │  └────────────────┘  │  │
│  └─────────────────────┴──────────────────────┘  │
└──────────────────────────────────────────────────┘
```

---

## 2. 제안 시스템 워크플로우

### 2.1 전체 흐름
```
[1단계: 문제 라벨링]
문제 탭 → 블록 선택 → G키로 그룹 생성 → 문제 정보 입력 → 반복

[2단계: 해설 연결]
해설 탭 → 오른쪽 패널에서 문제 클릭 → 블록 선택 → 그룹 생성
→ 자동으로 선택한 문제와 연결 → 다음 문제로 자동 이동 → 반복
```

### 2.2 핵심 차별점

| 항목 | 듀얼 윈도우 | 싱글 캔버스 탭 |
|------|------------|---------------|
| 화면 구성 | 2개 브라우저 창 | 1개 창 + 탭 |
| 동기화 | BroadcastChannel | 로컬 상태 |
| 매칭 방식 | FIFO 자동 매칭 | 클릭 선택 후 연결 |
| 문제/해설 동시 조회 | ✅ 가능 | ❌ 탭 전환 필요 |
| 창 관리 | 복잡 (팝업 차단 이슈) | 단순 |

---

## 3. 싱글 캔버스 탭 시스템 상세 설계

### 3.1 탭 구조
```typescript
interface TabState {
  activeTab: 'problem' | 'solution';
  problemDocument: DocumentInfo | null;
  solutionDocument: DocumentInfo | null;
}
```

### 3.2 작업 패널 (오른쪽)
```
┌──────────────────────────┐
│  📋 문제 목록 (12개)      │
├──────────────────────────┤
│  ┌────────────────────┐  │
│  │ ⬤ 1번  베이직쎈_p18 │  │  ← 연결됨 (초록)
│  │ ⬤ 2번  베이직쎈_p18 │  │
│  │ ○ 3번  베이직쎈_p19 │  │  ← 미연결 (회색)
│  │ ▶ 4번  베이직쎈_p19 │  │  ← 현재 선택 (파랑)
│  │ ○ 5번  베이직쎈_p20 │  │
│  └────────────────────────┘│
│                           │
│  ─────────────────────    │
│  선택: 4번 문제           │
│  "해설을 그룹핑하세요"    │
│  ─────────────────────    │
│                           │
│  진행률: 2/12 (17%)       │
│  ████░░░░░░░░░░░░░░░      │
└──────────────────────────┘
```

### 3.3 키보드 단축키
```
문제 탭:
  G: 그룹 생성
  ← →: 페이지 이동
  Esc: 선택 해제

해설 탭:
  G: 그룹 생성 (선택된 문제와 연결)
  ↑ ↓: 문제 선택 이동
  Tab: 다음 미연결 문제
  Enter: 현재 문제 선택 확정
```

---

## 4. 구현 가능성 분석

### 4.1 필요한 변경

#### A. 새로 만들 컴포넌트
```
frontend/src/
├── pages/
│   └── UnifiedViewerPage.tsx      # 통합 뷰어 페이지 (새로 생성)
├── components/
│   ├── unified/
│   │   ├── TabHeader.tsx          # 문제/해설 탭 헤더
│   │   ├── ProblemListPanel.tsx   # 오른쪽 문제 목록 패널
│   │   └── ConnectionStatus.tsx   # 연결 상태 표시
```

#### B. 수정할 컴포넌트
```
GroupPanel.tsx     - 연결 로직 추가
PageViewer.tsx     - 탭 지원을 위한 props 추가
```

#### C. 새로운 상태 관리
```typescript
// 통합 뷰어 상태
interface UnifiedViewerState {
  // 문서
  problemDocId: string;
  solutionDocId: string;

  // 탭
  activeTab: 'problem' | 'solution';

  // 문제 목록 (문제 탭에서 생성된 그룹들)
  problemGroups: ProblemGroup[];

  // 해설 목록 (해설 탭에서 생성된 그룹들)
  solutionGroups: ProblemGroup[];

  // 선택된 문제 (해설 연결 대기)
  selectedProblemId: string | null;

  // 연결 정보
  links: Map<string, string>;  // problemGroupId → solutionGroupId
}
```

### 4.2 난이도 평가

| 컴포넌트 | 난이도 | 예상 시간 | 비고 |
|----------|--------|----------|------|
| TabHeader | ⭐ | 1시간 | 간단한 탭 UI |
| ProblemListPanel | ⭐⭐ | 3시간 | 목록 + 선택 로직 |
| ConnectionStatus | ⭐ | 1시간 | 상태 표시 |
| UnifiedViewerPage | ⭐⭐⭐ | 6시간 | 상태 관리 복잡 |
| 기존 컴포넌트 수정 | ⭐⭐ | 2시간 | props 추가 |

**총 예상 시간: 13-16시간 (2-3일)**

---

## 5. 장단점 비교

### 5.1 듀얼 윈도우 시스템

#### 장점 ✅
1. **동시 조회**: 문제와 해설을 나란히 볼 수 있음
2. **화면 활용**: 듀얼 모니터 환경에서 효과적
3. **독립적 작업**: 각 창에서 자유롭게 작업 가능
4. **기존 구현 완료**: Phase 22에서 이미 구현됨

#### 단점 ❌
1. **팝업 차단**: 브라우저 팝업 차단 이슈
2. **동기화 복잡성**: BroadcastChannel 의존
3. **창 관리 불편**: 창 위치/크기 관리 필요
4. **FIFO 강제**: 순서대로만 매칭 가능
5. **단일 모니터 불편**: 작은 화면에서 비효율적

### 5.2 싱글 캔버스 탭 시스템

#### 장점 ✅
1. **단순한 아키텍처**: 브라우저 창 1개, BroadcastChannel 불필요
2. **자유로운 매칭**: 원하는 문제-해설 직접 선택
3. **팝업 이슈 없음**: 팝업 차단 걱정 없음
4. **명확한 워크플로우**: 단계별 진행
5. **진행 상황 가시화**: 오른쪽 패널에서 전체 현황 파악
6. **자동 이동**: 연결 후 다음 문제로 자동 전환

#### 단점 ❌
1. **동시 조회 불가**: 문제-해설 동시에 못 봄 (탭 전환 필요)
2. **새로 구현 필요**: 개발 시간 투자
3. **컨텍스트 전환**: 탭 전환 시 인지 부하
4. **듀얼 모니터 미활용**: 넓은 화면 활용 못 함

---

## 6. 주요 우려사항 및 해결 방안

### 6.1 동시 조회 불가 문제

**우려**: 문제를 보면서 해설을 매칭해야 하는데, 탭 전환이 필요

**해결 방안**:
```
[옵션 1: 미니 프리뷰]
문제 선택 시 해설 탭에서 해당 문제 썸네일 표시

┌──────────────────────────────────────┐
│  [문제] [해설]                        │
├──────────────────────────────────────┤
│  ┌─────────────┬──────────────────┐  │
│  │             │  선택: 4번 문제   │  │
│  │   해설      │  ┌─────────────┐ │  │
│  │   캔버스    │  │ [미니 썸네일]│ │  │
│  │             │  │  문제 이미지 │ │  │
│  │             │  └─────────────┘ │  │
│  │             │  "이 문제의 해설 │  │
│  │             │   을 그룹핑하세요"│  │
│  └─────────────┴──────────────────┘  │
└──────────────────────────────────────┘

[옵션 2: 분할 뷰 (고급)]
Shift 키 누르면 화면 분할하여 문제+해설 동시 표시
```

### 6.2 컨텍스트 전환 피로

**우려**: 문제 작업 → 해설 작업 → 문제 작업 반복 시 피로

**해결 방안**:
```
[워크플로우 분리]
1. 문제 탭에서 모든 문제 먼저 라벨링 (1~12번 전부)
2. 해설 탭으로 전환
3. 순서대로 해설 연결 (자동 다음 이동)

→ 탭 전환 최소화 (문제 완료 후 1번만 전환)
```

### 6.3 기존 시스템과의 공존

**우려**: 듀얼 윈도우 기능을 완전히 제거해야 하나?

**해결 방안**:
```
[두 모드 병행 유지]
- Dashboard에서 선택 가능:
  - "듀얼 윈도우로 매칭" (기존)
  - "통합 뷰어로 매칭" (신규)

- 각 모드의 장점 활용:
  - 듀얼 모니터 → 듀얼 윈도우
  - 단일 모니터/노트북 → 통합 뷰어
```

### 6.4 상태 관리 복잡성

**우려**: 두 문서의 그룹을 한 곳에서 관리하면 복잡해질 수 있음

**해결 방안**:
```typescript
// Zustand 스토어 분리
const useProblemStore = create<ProblemStore>(...);
const useSolutionStore = create<SolutionStore>(...);
const useLinkStore = create<LinkStore>(...);

// 또는 단일 스토어에서 slice로 관리
const useUnifiedStore = create<UnifiedStore>((set, get) => ({
  problem: { ... },
  solution: { ... },
  links: { ... },
}));
```

---

## 7. 구현 우선순위 권장

### Phase 31: 싱글 캔버스 탭 시스템 (권장 시)

#### 31-A: 기본 탭 구조 (4시간)
```
- UnifiedViewerPage 생성
- TabHeader 컴포넌트
- 문제/해설 탭 전환
```

#### 31-B: 문제 목록 패널 (4시간)
```
- ProblemListPanel 컴포넌트
- 문제 클릭 → 선택 상태
- 연결 상태 표시 (○/⬤)
```

#### 31-C: 해설 연결 로직 (4시간)
```
- 해설 그룹 생성 시 선택된 문제와 연결
- 양방향 link 정보 저장
- 자동 다음 문제 이동
```

#### 31-D: UX 개선 (4시간)
```
- 미니 프리뷰
- 키보드 단축키
- 진행률 표시
```

---

## 8. 최종 권고

### 8.1 구현 가능성: ✅ 충분히 가능

| 항목 | 평가 |
|------|------|
| 기술적 난이도 | 중간 (13-16시간) |
| 아키텍처 단순화 | ✅ 크게 개선됨 |
| UX 개선 | ✅ 자유로운 매칭 |
| 리스크 | 낮음 |

### 8.2 두 시스템 비교 요약

| 기준 | 듀얼 윈도우 | 싱글 탭 | 승자 |
|------|------------|---------|------|
| 동시 조회 | ✅ | ❌ | 듀얼 |
| 아키텍처 단순성 | ❌ | ✅ | 싱글 |
| 팝업 이슈 | ❌ | ✅ | 싱글 |
| 자유로운 매칭 | ❌ | ✅ | 싱글 |
| 진행 현황 파악 | △ | ✅ | 싱글 |
| 단일 모니터 | ❌ | ✅ | 싱글 |
| 듀얼 모니터 | ✅ | ❌ | 듀얼 |
| 기존 구현 | ✅ | ❌ | 듀얼 |

### 8.3 권장 사항

```
[추천: 싱글 캔버스 탭 시스템 구현]

이유:
1. 아키텍처가 훨씬 단순함 (BroadcastChannel 제거)
2. 팝업 차단 문제 완전 해결
3. 자유로운 문제-해설 매칭 가능
4. 대부분의 사용자가 단일 모니터 환경

단, 기존 듀얼 윈도우도 유지하여 선택 가능하게 함
(듀얼 모니터 사용자를 위해)
```

---

## 9. 결론

**싱글 캔버스 탭 시스템**은 기술적으로 충분히 구현 가능하며, 현재 듀얼 윈도우 시스템의 복잡성을 크게 줄일 수 있습니다.

**주요 장점**:
- BroadcastChannel 동기화 제거 → 버그 가능성 감소
- 팝업 차단 이슈 완전 해결
- 자유로운 문제-해설 매칭
- 명확한 진행 상황 파악

**주요 우려**:
- 문제-해설 동시 조회 불가 → 미니 프리뷰로 해결 가능
- 새로 구현 필요 → 2-3일 투자

**권장**: 싱글 캔버스 탭 시스템을 우선 구현하고, 기존 듀얼 윈도우는 옵션으로 유지

---

*보고서 끝*
