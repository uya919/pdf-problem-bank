# ë¼ë²¨ë§ ì‹œìŠ¤í…œ ì „ë©´ ì¬ì„¤ê³„ ì—°êµ¬ ë¦¬í¬íŠ¸

> Phase 32: ì›Œí¬í”Œë¡œìš° ë¶„ë¦¬ + ì§„í–‰ ìƒí™© ì €ì¥ ì‹œìŠ¤í…œ

---

## 1. Executive Summary

### í˜„ì¬ ë¬¸ì œì 
1. **ë°ì´í„° ì†ì‹¤**: ë¬¸ì œ/í•´ì„¤ ì§€ì • í›„ í˜ì´ì§€ ì´ë™í•˜ë©´ matchingStoreê°€ ë¦¬ì…‹ë¨
2. **ì›Œí¬í”Œë¡œìš° í˜¼ë€**: ë¬¸ì œ ì§€ì •ê³¼ í•´ì„¤ ì—°ê²°ì´ ë™ì‹œì— ì§„í–‰ë˜ì–´ ë³µì¡í•¨
3. **ì €ì¥ ë¶ˆì¼ì¹˜**: localStorage(í”„ë¡ íŠ¸)ì™€ groups.json(ë°±ì—”ë“œ)ì´ ë¶„ë¦¬ë˜ì–´ ë™ê¸°í™” ì•ˆë¨
4. **ì¬ì§„ì… ë¶ˆê°€**: ì‘ì—… ì¤‘ë‹¨ í›„ ì¬ê°œê°€ ì–´ë ¤ì›€

### ì œì•ˆ ì†”ë£¨ì…˜
**3ë‹¨ê³„ ë¶„ë¦¬ ì›Œí¬í”Œë¡œìš°** + **ë°±ì—”ë“œ ì„¸ì…˜ ê¸°ë°˜ ì˜êµ¬ ì €ì¥**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ìƒˆë¡œìš´ ì›Œí¬í”Œë¡œìš°                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Step 1: ë¬¸ì œ ì§€ì • (/labeling/:docId)                       â”‚
â”‚    â””â”€ ë¬¸ì œ PDFì—ì„œ ëª¨ë“  ë¬¸ì œ ê·¸ë£¹í•‘                          â”‚
â”‚    â””â”€ ë‚˜ê°€ë„ groups.jsonì— ì €ì¥ë¨ âœ“                         â”‚
â”‚                                                             â”‚
â”‚  Step 2: í•´ì„¤ ì—°ê²° ì„¤ì • (/setup-matching/:problemDocId)     â”‚
â”‚    â””â”€ í•´ì„¤ PDF ì„ íƒ                                         â”‚
â”‚    â””â”€ "ë§¤ì¹­ ì‹œì‘" ë²„íŠ¼                                       â”‚
â”‚                                                             â”‚
â”‚  Step 3: ë§¤ì¹­ (/matching/:sessionId)                        â”‚
â”‚    â””â”€ ê° ë¬¸ì œì— í•´ì„¤ ì˜ì—­ ì—°ê²°                               â”‚
â”‚    â””â”€ ì§„í–‰ë¥  í‘œì‹œ + ìë™ ì €ì¥                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„

### 2.1 ë°ì´í„° ì €ì¥ êµ¬ì¡°ì˜ ë¬¸ì œ

```
í˜„ì¬ ìƒíƒœ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  [matchingStore - localStorage]     [groups.json - ë°±ì—”ë“œ]   â”‚
â”‚  â”œâ”€ problems[]  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Xâ”€â”€â”€â”€ groups[].problemInfo    â”‚
â”‚  â”œâ”€ links[]                         (ë™ê¸°í™” ì•ˆë¨!)           â”‚
â”‚  â””â”€ activeTab                                               â”‚
â”‚                                                             â”‚
â”‚  ë¬¸ì œì :                                                     â”‚
â”‚  1. matchingStoreê°€ ë¬¸ì„œ ë³€ê²½ ì‹œ ë¦¬ì…‹ë¨                      â”‚
â”‚  2. groups.jsonì˜ ê¸°ì¡´ ê·¸ë£¹ ì •ë³´ë¥¼ ë¬´ì‹œí•¨                    â”‚
â”‚  3. links[]ê°€ ë°±ì—”ë“œì— ì €ì¥ë˜ì§€ ì•ŠìŒ                         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 í˜„ì¬ ì½”ë“œì˜ ë¬¸ì œì 

```typescript
// matchingStore.ts:98-116 - ì´ˆê¸°í™” ì‹œ ëª¨ë“  ë°ì´í„° ë¦¬ì…‹
initSession: (problemDocId, solutionDocId, ...) => {
  if (state.problemDocId !== problemDocId || state.solutionDocId !== solutionDocId) {
    set({
      problems: [],     // âŒ ê¸°ì¡´ ë°ì´í„° ì‚­ì œ
      links: [],        // âŒ ì—°ê²° ì •ë³´ ì‚­ì œ
      ...
    });
  }
}
```

### 2.3 ê¸°ì¡´ ì¸í”„ë¼ (ì¬í™œìš© ê°€ëŠ¥)

| ì»´í¬ë„ŒíŠ¸ | ìœ„ì¹˜ | ìƒíƒœ | ì¬í™œìš© |
|----------|------|------|--------|
| groups.json ì €ì¥ | backend/blocks.py | âœ… ì‘ë™ | ê·¸ëŒ€ë¡œ ì‚¬ìš© |
| ë§¤ì¹­ ì„¸ì…˜ API | backend/matching.py | âœ… ì¡´ì¬ | í™•ì¥ í•„ìš” |
| PageCanvas | frontend/components | âœ… ì‘ë™ | ê·¸ëŒ€ë¡œ ì‚¬ìš© |
| ZoomControls | frontend/unified | âœ… ì™„ì„± | ê·¸ëŒ€ë¡œ ì‚¬ìš© |

---

## 3. ìƒˆë¡œìš´ ì•„í‚¤í…ì²˜ ì„¤ê³„

### 3.1 ë°ì´í„° ëª¨ë¸

```typescript
// ========== ë°±ì—”ë“œ ì €ì¥ êµ¬ì¡° ==========

// 1. ë¬¸ì„œë³„ ê·¸ë£¹ (ê¸°ì¡´ groups.json í™•ì¥)
interface GroupsFile {
  document_id: string;
  page_index: number;
  groups: ProblemGroup[];
}

interface ProblemGroup {
  id: string;                    // "g_1701234567_abc12"
  block_ids: number[];
  column: string;
  problemInfo: {
    bookName: string;
    course: string;
    page: number;
    problemNumber: string;
  };
  // NEW: ë§¤ì¹­ ì •ë³´ë„ ê·¸ë£¹ì— ì €ì¥
  linkedSolution?: {
    documentId: string;
    pageIndex: number;
    groupId: string;
    linkedAt: number;
  };
  createdAt: string;
  updatedAt: string;
}

// 2. ë§¤ì¹­ ì‘ì—… ì„¸ì…˜ (ìƒˆë¡œ ì¶”ê°€)
interface MatchingWorkSession {
  sessionId: string;              // "work_1701234567_abc12"

  // ë¬¸ì„œ ì •ë³´
  problemDocId: string;
  solutionDocId: string;
  problemDocName: string;
  solutionDocName: string;

  // ì§„í–‰ ìƒí™©
  status: 'draft' | 'in_progress' | 'completed';
  currentStep: 'problem_labeling' | 'solution_setup' | 'matching';

  // í†µê³„
  totalProblems: number;
  linkedProblems: number;

  // íƒ€ì„ìŠ¤íƒ¬í”„
  createdAt: number;
  updatedAt: number;
  lastAccessedAt: number;
}

// 3. ë¬¸ì œ-í•´ì„¤ ì—°ê²° (ê·¸ë£¹ ë‚´ë¶€ì— ì €ì¥ or ë³„ë„ íŒŒì¼)
// â†’ groups.jsonì˜ linkedSolution í•„ë“œ ì‚¬ìš©
```

### 3.2 í˜ì´ì§€/ë¼ìš°íŒ… êµ¬ì¡°

```
ìƒˆë¡œìš´ ë¼ìš°íŒ…:
/                                    â†’ Dashboard (ì‘ì—… ëª©ë¡)
  â”‚
  â”œâ”€ /labeling/:documentId           â†’ LabelingPage (ë¬¸ì œ/í•´ì„¤ ì§€ì •)
  â”‚   â””â”€ groups.jsonì— ì €ì¥
  â”‚
  â”œâ”€ /setup/:problemDocId            â†’ SetupMatchingPage (í•´ì„¤ ì„ íƒ)
  â”‚   â””â”€ í•´ì„¤ PDF ì„ íƒ â†’ ì„¸ì…˜ ìƒì„±
  â”‚
  â”œâ”€ /matching/:sessionId            â†’ MatchingPage (ì—°ê²° ì‘ì—…)
  â”‚   â””â”€ ë°±ì—”ë“œ ì„¸ì…˜ ê¸°ë°˜ ì €ì¥
  â”‚
  â””â”€ /bank                           â†’ ProblemBankHub (ê¸°ì¡´)
```

### 3.3 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/pages/
â”œâ”€ Dashboard.tsx              # NEW: ì‘ì—… ëª©ë¡ ëŒ€ì‹œë³´ë“œ
â”œâ”€ LabelingPage.tsx           # ê¸°ì¡´ (ìˆ˜ì •)
â”œâ”€ SetupMatchingPage.tsx      # NEW: í•´ì„¤ ì„ íƒ + ì„¸ì…˜ ìƒì„±
â”œâ”€ MatchingPage.tsx           # ê¸°ì¡´ UnifiedMatchingPage ë¦¬íŒ©í† ë§
â””â”€ ProblemBankHub.tsx         # ê¸°ì¡´

src/components/
â”œâ”€ dashboard/
â”‚   â”œâ”€ WorkSessionCard.tsx    # NEW: ì‘ì—… ì„¸ì…˜ ì¹´ë“œ
â”‚   â””â”€ ProgressIndicator.tsx  # NEW: ì§„í–‰ë¥  í‘œì‹œ
â”‚
â”œâ”€ labeling/
â”‚   â”œâ”€ PageCanvas.tsx         # ê¸°ì¡´ (ìˆ˜ì • ì—†ìŒ)
â”‚   â”œâ”€ GroupPanel.tsx         # ê¸°ì¡´ (ìˆ˜ì •)
â”‚   â””â”€ LabelingHeader.tsx     # NEW: ë‹¤ìŒ ë‹¨ê³„ ë²„íŠ¼
â”‚
â”œâ”€ matching/
â”‚   â”œâ”€ MatchingCanvas.tsx     # ê¸°ì¡´ (ìˆ˜ì •)
â”‚   â”œâ”€ ProblemListPanel.tsx   # ê¸°ì¡´ (ìˆ˜ì •)
â”‚   â””â”€ MatchingProgress.tsx   # NEW: ì§„í–‰ ìƒí™© í‘œì‹œ
â”‚
â””â”€ unified/
    â”œâ”€ ZoomControls.tsx       # ê¸°ì¡´ (ìˆ˜ì • ì—†ìŒ)
    â””â”€ ResizeHandle.tsx       # ê¸°ì¡´ (ìˆ˜ì • ì—†ìŒ)
```

---

## 4. ìƒˆë¡œìš´ ì›Œí¬í”Œë¡œìš° ìƒì„¸

### 4.1 Step 1: ë¬¸ì œ ì§€ì •

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LabelingPage (/labeling/:problemDocId)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚                     â”‚               â”‚                   â”‚
â”‚  â”‚    PageCanvas       â”‚  GroupPanel   â”‚                   â”‚
â”‚  â”‚  (ë¬¸ì œ PDF í‘œì‹œ)     â”‚  (ê·¸ë£¹ ëª©ë¡)   â”‚                   â”‚
â”‚  â”‚                     â”‚               â”‚                   â”‚
â”‚  â”‚  ë¸”ë¡ ì„ íƒ â†’ Gí‚¤     â”‚  â”œâ”€ 1ë²ˆ ë¬¸ì œ  â”‚                   â”‚
â”‚  â”‚  â†’ ê·¸ë£¹ ìƒì„±        â”‚  â”œâ”€ 2ë²ˆ ë¬¸ì œ  â”‚                   â”‚
â”‚  â”‚                     â”‚  â””â”€ 3ë²ˆ ë¬¸ì œ  â”‚                   â”‚
â”‚  â”‚                     â”‚               â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                             â”‚
â”‚  [â† ë’¤ë¡œ]                        [í•´ì„¤ ì—°ê²°í•˜ê¸° â†’]          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë°ì´í„° ì €ì¥:
- ê·¸ë£¹ ìƒì„± â†’ groups.jsonì— ì¦‰ì‹œ ì €ì¥ (2ì´ˆ ë””ë°”ìš´ìŠ¤)
- ë‚˜ê°€ë„ ë°ì´í„° ìœ ì§€ âœ“
- ì¬ì§„ì… ì‹œ groups.jsonì—ì„œ ë³µì› âœ“
```

### 4.2 Step 2: í•´ì„¤ ì—°ê²° ì„¤ì •

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SetupMatchingPage (/setup/:problemDocId)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚   ğŸ“˜ ë¬¸ì œ PDF: "ìˆ˜í•™ì˜ ë°”ì´ë¸” ê°œë…on"                   â”‚ â”‚
â”‚  â”‚   ë“±ë¡ëœ ë¬¸ì œ: 25ê°œ                                    â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â”‚   í•´ì„¤ PDF ì„ íƒ:                                       â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚   â”‚  ğŸ“• ìˆ˜í•™ì˜ ë°”ì´ë¸” í•´ì„¤ì§‘                         â”‚ â”‚ â”‚
â”‚  â”‚   â”‚  ğŸ“™ ë‹¤ë¥¸ í•´ì„¤ì§‘...                               â”‚ â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  [â† ë¬¸ì œ í¸ì§‘]                         [ë§¤ì¹­ ì‹œì‘ â†’]        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë°ì´í„° ì €ì¥:
- ì„¸ì…˜ ìƒì„± â†’ backend/matching/work_xxx.json
- ë¬¸ì œ ëª©ë¡ ë³µì‚¬ (groups.jsonì—ì„œ)
```

### 4.3 Step 3: ë§¤ì¹­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MatchingPage (/matching/:sessionId)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [1] ë¬¸ì œ  [2] í•´ì„¤                   ì§„í–‰ë¥ : 12/25 (48%)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚                     â”‚               â”‚                   â”‚
â”‚  â”‚   MatchingCanvas    â”‚ ProblemList   â”‚                   â”‚
â”‚  â”‚  (ë¬¸ì œ/í•´ì„¤ í‘œì‹œ)    â”‚  Panel        â”‚                   â”‚
â”‚  â”‚                     â”‚               â”‚                   â”‚
â”‚  â”‚  í˜„ì¬: í•´ì„¤ íƒ­       â”‚  â”œâ”€ âœ“ 1ë²ˆ    â”‚                   â”‚
â”‚  â”‚                     â”‚  â”œâ”€ âœ“ 2ë²ˆ    â”‚                   â”‚
â”‚  â”‚  ì„ íƒëœ ë¬¸ì œ: 3ë²ˆ    â”‚  â”œâ”€ â†’ 3ë²ˆ â—€  â”‚                   â”‚
â”‚  â”‚  â†’ í•´ì„¤ ì˜ì—­ ì§€ì •    â”‚  â”œâ”€ â—‹ 4ë²ˆ    â”‚                   â”‚
â”‚  â”‚                     â”‚  â””â”€ â—‹ 5ë²ˆ    â”‚                   â”‚
â”‚  â”‚                     â”‚               â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                             â”‚
â”‚  [â† ì €ì¥ í›„ ë‚˜ê°€ê¸°]                    [ì™„ë£Œ]               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë°ì´í„° ì €ì¥:
- ì—°ê²° ìƒì„± â†’ groups.jsonì˜ linkedSolution ì—…ë°ì´íŠ¸
- ì„¸ì…˜ ì§„í–‰ë¥  â†’ backend/matching/work_xxx.json
- ìë™ ì €ì¥ (2ì´ˆ ë””ë°”ìš´ìŠ¤)
```

### 4.4 Dashboard (ì‘ì—… ëª©ë¡)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard (/)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ì§„í–‰ ì¤‘ì¸ ì‘ì—…                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“˜ ìˆ˜í•™ì˜ ë°”ì´ë¸”          Step 3: ë§¤ì¹­ ì¤‘ (48%)         â”‚â”‚
â”‚  â”‚    12/25 ë¬¸ì œ ì—°ê²°ë¨      [ê³„ì†í•˜ê¸°]                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“— ë² ì´ì§ìˆ              Step 1: ë¬¸ì œ ì§€ì • ì¤‘           â”‚â”‚
â”‚  â”‚    8ê°œ ë¬¸ì œ ë“±ë¡ë¨        [ê³„ì†í•˜ê¸°]                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  ì™„ë£Œëœ ì‘ì—…                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“™ ìˆ ìˆ˜í•™               100% ì™„ë£Œ (30ë¬¸ì œ)             â”‚â”‚
â”‚  â”‚    2024-12-02            [ë³´ê¸°] [ë¬¸ì œì€í–‰ìœ¼ë¡œ]          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  [+ ìƒˆ ì‘ì—… ì‹œì‘]                                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ë°±ì—”ë“œ API ì„¤ê³„

### 5.1 ì‘ì—… ì„¸ì…˜ API (NEW)

```python
# backend/app/routers/work_sessions.py

# ì„¸ì…˜ ëª©ë¡ ì¡°íšŒ
GET /api/work-sessions
Response: {
  sessions: WorkSession[],
  stats: { inProgress: number, completed: number }
}

# ì„¸ì…˜ ìƒì„±
POST /api/work-sessions
Body: {
  problemDocId: string,
  solutionDocId?: string,  # Step 2ì—ì„œ ì„¤ì •
  name?: string
}
Response: WorkSession

# ì„¸ì…˜ ì¡°íšŒ
GET /api/work-sessions/:sessionId
Response: WorkSession

# ì„¸ì…˜ ì—…ë°ì´íŠ¸ (ìƒíƒœ/ë‹¨ê³„ ë³€ê²½)
PATCH /api/work-sessions/:sessionId
Body: {
  status?: 'draft' | 'in_progress' | 'completed',
  currentStep?: 'problem_labeling' | 'solution_setup' | 'matching',
  solutionDocId?: string
}
Response: WorkSession

# ì„¸ì…˜ ì‚­ì œ
DELETE /api/work-sessions/:sessionId
```

### 5.2 ê·¸ë£¹ ì—°ê²° API (ê¸°ì¡´ í™•ì¥)

```python
# backend/app/routers/blocks.py

# ê·¸ë£¹ì— í•´ì„¤ ì—°ê²° (NEW)
PATCH /api/blocks/documents/:docId/groups/:pageIndex/:groupId/link
Body: {
  solutionDocId: string,
  solutionPageIndex: number,
  solutionGroupId: string
}
Response: { success: true, group: ProblemGroup }

# ê·¸ë£¹ ì—°ê²° í•´ì œ (NEW)
DELETE /api/blocks/documents/:docId/groups/:pageIndex/:groupId/link
Response: { success: true }

# ë¬¸ì„œì˜ ëª¨ë“  ê·¸ë£¹ ì¡°íšŒ (NEW - ëª¨ë“  í˜ì´ì§€)
GET /api/blocks/documents/:docId/all-groups
Response: {
  document_id: string,
  total_groups: number,
  groups: Array<{
    page_index: number,
    groups: ProblemGroup[]
  }>
}
```

### 5.3 ë°ì´í„° ì €ì¥ êµ¬ì¡°

```
dataset_root/
â”œâ”€ {document_id}/
â”‚  â”œâ”€ groups/
â”‚  â”‚  â””â”€ page_0000_groups.json
â”‚  â”‚     {
â”‚  â”‚       "groups": [{
â”‚  â”‚         "id": "g_xxx",
â”‚  â”‚         "problemInfo": {...},
â”‚  â”‚         "linkedSolution": {        // NEW
â”‚  â”‚           "documentId": "...",
â”‚  â”‚           "pageIndex": 0,
â”‚  â”‚           "groupId": "g_yyy",
â”‚  â”‚           "linkedAt": 1701234567
â”‚  â”‚         }
â”‚  â”‚       }]
â”‚  â”‚     }
â”‚  â””â”€ ...
â”‚
â””â”€ work_sessions/                        // NEW
   â”œâ”€ work_1701234567_abc12.json
   â””â”€ work_1701234568_def34.json
```

---

## 6. í”„ë¡ íŠ¸ì—”ë“œ ìƒíƒœ ê´€ë¦¬ ì¬ì„¤ê³„

### 6.1 ì „ì—­ ìƒíƒœ (Zustand)

```typescript
// stores/workSessionStore.ts (NEW)
interface WorkSessionStore {
  // í˜„ì¬ ì‘ì—… ì„¸ì…˜
  currentSession: WorkSession | null;

  // Actions
  loadSession: (sessionId: string) => Promise<void>;
  createSession: (problemDocId: string) => Promise<string>;
  updateSession: (updates: Partial<WorkSession>) => Promise<void>;

  // ì„¸ì…˜ ëª©ë¡ (ëŒ€ì‹œë³´ë“œìš©)
  sessions: WorkSession[];
  loadSessions: () => Promise<void>;
}

// stores/labelingStore.ts (NEW - matchingStore ëŒ€ì²´)
interface LabelingStore {
  // í˜„ì¬ ë¬¸ì„œ
  documentId: string | null;

  // ë¬¸ì œ ëª©ë¡ (groups.jsonì—ì„œ ë¡œë“œ)
  problems: ProblemItem[];

  // Actions
  loadProblems: (documentId: string) => Promise<void>;
  addProblem: (problem: ProblemItem) => void;
  linkSolution: (problemId: string, solution: SolutionLink) => Promise<void>;

  // ì§„í–‰ë¥ 
  getProgress: () => { linked: number; total: number; percent: number };
}
```

### 6.2 ë°ì´í„° ë¡œë”© ì „ëµ

```typescript
// í˜ì´ì§€ ì§„ì… ì‹œ ë°ì´í„° ë³µì›

// LabelingPage
useEffect(() => {
  // groups.jsonì—ì„œ ê¸°ì¡´ ê·¸ë£¹ ë¡œë“œ
  const groups = await api.getAllGroups(documentId);
  labelingStore.setProblems(groups);
}, [documentId]);

// MatchingPage
useEffect(() => {
  // 1. ì„¸ì…˜ ë¡œë“œ
  const session = await api.getWorkSession(sessionId);
  workSessionStore.setCurrentSession(session);

  // 2. ë¬¸ì œ ëª©ë¡ ë¡œë“œ (groups.jsonì—ì„œ)
  const groups = await api.getAllGroups(session.problemDocId);
  labelingStore.setProblems(groups);
}, [sessionId]);
```

---

## 7. êµ¬í˜„ ë‹¨ê³„ë³„ ê³„íš

### Phase 32-A: ë°±ì—”ë“œ í™•ì¥ (1-2ì‹œê°„)
```
[ ] 1. /api/blocks/documents/:docId/all-groups ì—”ë“œí¬ì¸íŠ¸
[ ] 2. /api/blocks/.../link ì—”ë“œí¬ì¸íŠ¸ (ê·¸ë£¹ì— í•´ì„¤ ì—°ê²°)
[ ] 3. /api/work-sessions CRUD
[ ] 4. work_sessions/ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```

### Phase 32-B: ìŠ¤í† ì–´ ë¦¬íŒ©í† ë§ (1-2ì‹œê°„)
```
[ ] 1. workSessionStore ìƒì„±
[ ] 2. labelingStore ìƒì„± (matchingStore ëŒ€ì²´)
[ ] 3. ê¸°ì¡´ matchingStore í˜¸í™˜ì„± ìœ ì§€ (deprecate)
```

### Phase 32-C: Dashboard í˜ì´ì§€ (1-2ì‹œê°„)
```
[ ] 1. Dashboard.tsx ìƒì„±
[ ] 2. WorkSessionCard ì»´í¬ë„ŒíŠ¸
[ ] 3. ë¼ìš°íŒ… ìˆ˜ì • (/ â†’ Dashboard)
```

### Phase 32-D: LabelingPage ìˆ˜ì • (1-2ì‹œê°„)
```
[ ] 1. ê·¸ë£¹ ë¡œë“œ ì‹œ groups.jsonì—ì„œ ë³µì›
[ ] 2. "í•´ì„¤ ì—°ê²°í•˜ê¸°" ë²„íŠ¼ ì¶”ê°€
[ ] 3. LabelingHeader ì»´í¬ë„ŒíŠ¸
```

### Phase 32-E: SetupMatchingPage (1-2ì‹œê°„)
```
[ ] 1. SetupMatchingPage.tsx ìƒì„±
[ ] 2. í•´ì„¤ PDF ì„ íƒ UI
[ ] 3. ì„¸ì…˜ ìƒì„± ë¡œì§
```

### Phase 32-F: MatchingPage ë¦¬íŒ©í† ë§ (2-3ì‹œê°„)
```
[ ] 1. ì„¸ì…˜ ê¸°ë°˜ ë°ì´í„° ë¡œë“œ
[ ] 2. linkedSolution ì—…ë°ì´íŠ¸ ë¡œì§
[ ] 3. ì§„í–‰ë¥  í‘œì‹œ ê°œì„ 
[ ] 4. ìë™ ì €ì¥ (ë°±ì—”ë“œ ë™ê¸°í™”)
```

### Phase 32-G: í†µí•© í…ŒìŠ¤íŠ¸ (1ì‹œê°„)
```
[ ] 1. ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
[ ] 2. ì¬ì§„ì… í…ŒìŠ¤íŠ¸ (ë‚˜ê°”ë‹¤ ë“¤ì–´ì˜¤ê¸°)
[ ] 3. ë°ì´í„° ì˜ì†ì„± í™•ì¸
```

**ì´ ì˜ˆìƒ ì‹œê°„: 8-14ì‹œê°„**

---

## 8. ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### 8.1 ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„±

```typescript
// ê¸°ì¡´ matchingStore ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜
const migrateMatchingStore = () => {
  const oldData = localStorage.getItem('matching-store-v1');
  if (!oldData) return;

  const { problems, links } = JSON.parse(oldData);

  // links ì •ë³´ë¥¼ groups.jsonì— ë°˜ì˜
  for (const link of links) {
    await api.linkGroup(
      link.problemId,
      {
        documentId: solutionDocId,
        pageIndex: link.solutionPageIndex,
        groupId: link.solutionId
      }
    );
  }

  // ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ í›„ ì‚­ì œ
  localStorage.removeItem('matching-store-v1');
};
```

### 8.2 ì ì§„ì  ë°°í¬

```
Week 1: ë°±ì—”ë“œ API í™•ì¥ (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
Week 2: Dashboard + SetupMatchingPage ì¶”ê°€
Week 3: MatchingPage ë¦¬íŒ©í† ë§
Week 4: matchingStore deprecate + ë§ˆì´ê·¸ë ˆì´ì…˜
```

---

## 9. ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

### 9.1 ë™ì‹œì„± ì²˜ë¦¬

```typescript
// ì—¬ëŸ¬ ì°½ì—ì„œ ê°™ì€ ì„¸ì…˜ ì ‘ê·¼ ì‹œ
// â†’ ë§ˆì§€ë§‰ ì €ì¥ì´ ìš°ì„  (Last Write Wins)
// â†’ ì¶©ëŒ ê°ì§€: updatedAt ë¹„êµ

const saveWithConflictCheck = async (data, expectedUpdatedAt) => {
  const current = await api.getSession(sessionId);
  if (current.updatedAt !== expectedUpdatedAt) {
    // ì¶©ëŒ ê°ì§€
    showToast('ë‹¤ë¥¸ ê³³ì—ì„œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”.');
    return false;
  }
  await api.updateSession(data);
  return true;
};
```

### 9.2 ì˜¤í”„ë¼ì¸ ì§€ì› (ì„ íƒì )

```typescript
// Service Worker + IndexedDB
// â†’ ì˜¤í”„ë¼ì¸ì—ì„œë„ ì‘ì—… ê°€ëŠ¥
// â†’ ì˜¨ë¼ì¸ ë³µê·€ ì‹œ ë™ê¸°í™”

// í˜„ì¬ëŠ” ë¯¸êµ¬í˜„ (í–¥í›„ í™•ì¥ ê°€ëŠ¥)
```

### 9.3 ì„±ëŠ¥ ìµœì í™”

```typescript
// ëŒ€ìš©ëŸ‰ ë¬¸ì„œ ì²˜ë¦¬
// 1. í˜ì´ì§€ë„¤ì´ì…˜: í•œ ë²ˆì— 10ê°œ ê·¸ë£¹ë§Œ ë¡œë“œ
// 2. ê°€ìƒ ìŠ¤í¬ë¡¤: ProblemListPanelì— ì ìš©
// 3. ë””ë°”ìš´ìŠ¤: ì €ì¥ ìš”ì²­ 2ì´ˆ ì§€ì—°
```

---

## 10. ê²°ë¡ 

### í•µì‹¬ ë³€ê²½ì‚¬í•­

| í•­ëª© | í˜„ì¬ | ë³€ê²½ í›„ |
|------|------|---------|
| ë°ì´í„° ì €ì¥ | localStorage | ë°±ì—”ë“œ (groups.json, work_sessions/) |
| ì›Œí¬í”Œë¡œìš° | ë‹¨ì¼ í˜ì´ì§€ | 3ë‹¨ê³„ ë¶„ë¦¬ |
| ì¬ì§„ì… | ë¶ˆê°€ëŠ¥ | ì–´ë””ì„œë“  ì¬ê°œ ê°€ëŠ¥ |
| ì§„í–‰ ìƒí™© | ë¯¸í‘œì‹œ | Dashboardì—ì„œ í™•ì¸ |

### ê¸°ëŒ€ íš¨ê³¼

1. **ì‘ì—… ì†ì‹¤ ë°©ì§€**: ëª¨ë“  ë°ì´í„°ê°€ ë°±ì—”ë“œì— ì €ì¥
2. **ì§ê´€ì  ì›Œí¬í”Œë¡œìš°**: ë‹¨ê³„ë³„ ì§„í–‰ìœ¼ë¡œ í˜¼ë€ ê°ì†Œ
3. **ì¬ê°œ ê°€ëŠ¥**: ì¤‘ë‹¨ í›„ ì–¸ì œë“  ì¬ê°œ
4. **ì§„í–‰ ìƒí™© íŒŒì•…**: Dashboardì—ì„œ ì „ì²´ ì‘ì—… í˜„í™© í™•ì¸

### ë‹¤ìŒ ë‹¨ê³„

ì´ ê³„íšì— ë™ì˜í•˜ì‹œë©´ Phase 32-A (ë°±ì—”ë“œ í™•ì¥)ë¶€í„° ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.

---

*ì‘ì„±ì¼: 2024-12-03*
*Phase: 32 - ë¼ë²¨ë§ ì‹œìŠ¤í…œ ì¬ì„¤ê³„*
