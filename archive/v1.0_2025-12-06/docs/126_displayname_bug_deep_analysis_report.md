# displayName ë²„ê·¸ ì‹¬ì¸µ ë¶„ì„ ë¦¬í¬íŠ¸

**ì‘ì„±ì¼**: 2025-12-04
**ë¬¸ì œ**: ìƒˆë¡œ ë“±ë¡í•œ ë¬¸ì œê°€ "ë² ì´ì§ìˆ Â· 18p Â· 3ë²ˆ" ëŒ€ì‹  "ë¬¸ì œ Â· L1ë²ˆ"ìœ¼ë¡œ í‘œì‹œë¨
**ìƒíƒœ**: ğŸ”´ ì›ì¸ ë°œê²¬ â†’ ìˆ˜ì • í•„ìš”

---

## 1. ë¬¸ì œ í˜„ìƒ

### 1.1 ìŠ¤í¬ë¦°ìƒ· ë¶„ì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¯¸ì—°ê²° ë¬¸ì œ                        2 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹ ë² ì´ì§ìˆ Â· 18p Â· 3ë²ˆ     â† âœ… ì •ìƒ â”‚
â”‚ > ë¬¸ì œ Â· L1ë²ˆ               â† âŒ ë²„ê·¸ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ì‹¤ì œ ì„¸ì…˜ ë°ì´í„°

**íŒŒì¼**: `dataset_root/work_sessions/ws-1764825820939-1c1eacd5.json`

```json
{
  "problems": [
    {
      "groupId": "L3",
      "pageIndex": 17,
      "problemNumber": "3",
      "displayName": "ë² ì´ì§ìˆ_ê³µí†µìˆ˜í•™1_p18_3ë²ˆ"  // âœ… ì •ìƒ
    },
    {
      "groupId": "L1",
      "pageIndex": 9,
      "problemNumber": "ë¬¸ì œ L1",  // âŒ problemNumber ìì²´ê°€ ì˜ëª»ë¨
      "displayName": "ë¬¸ì œ L1"      // âŒ displayNameë„ ì˜ëª»ë¨
    }
  ]
}
```

---

## 2. ë°ì´í„° íë¦„ ì¶”ì 

### 2.1 ì •ìƒ ì¼€ì´ìŠ¤ (L3: ë² ì´ì§ìˆ Â· 18p Â· 3ë²ˆ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. PageViewer: ê·¸ë£¹ ìƒì„±                                            â”‚
â”‚    group.problemInfo.problemNumber = "3"                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. UnifiedWorkPage.handleGroupCreated()                             â”‚
â”‚    problemNumber = "3" (problemInfoì—ì„œ ê°€ì ¸ì˜´)                      â”‚
â”‚    displayName = "3" (problemNumberì™€ ë™ì¼í•˜ê²Œ ì „ë‹¬)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. workSessionStore.addProblem()                                    â”‚
â”‚    if (!problemData.displayName) â†’ FALSE (displayName = "3")        â”‚
â”‚    â†’ ìë™ ìƒì„± ë¡œì§ ì‹¤í–‰ ì•ˆ ë¨ (ì´ë¯¸ displayName ìˆìŒ)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. ë°±ì—”ë“œ add_problem API                                           â”‚
â”‚    displayName = "3" â†’ ì €ì¥                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì§ˆë¬¸**: L3ëŠ” ì–´ë–»ê²Œ "ë² ì´ì§ìˆ_ê³µí†µìˆ˜í•™1_p18_3ë²ˆ"ìœ¼ë¡œ ì €ì¥ë˜ì—ˆë‚˜?
- ì•„ë§ˆë„ ì´ì „ ì½”ë“œ ë²„ì „ì—ì„œ ìƒì„±ë˜ì—ˆê±°ë‚˜
- `refreshDisplayNames` APIë¥¼ í†µí•´ ìˆ˜ì •ë˜ì—ˆì„ ê°€ëŠ¥ì„±

### 2.2 ë²„ê·¸ ì¼€ì´ìŠ¤ (L1: ë¬¸ì œ Â· L1ë²ˆ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. PageViewer: ê·¸ë£¹ ìƒì„±                                            â”‚
â”‚    group.problemInfo = undefined (ë˜ëŠ” problemNumber ì—†ìŒ)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. UnifiedWorkPage.handleGroupCreated() [111-118ì¤„]                 â”‚
â”‚                                                                     â”‚
â”‚    const problemNumber =                                            â”‚
â”‚      group.problemInfo?.problemNumber || `ë¬¸ì œ ${group.id}`;        â”‚
â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚      undefined (ì—†ìŒ)                  â†’ í´ë°±: "ë¬¸ì œ L1"            â”‚
â”‚                                                                     â”‚
â”‚    await addProblem({                                               â”‚
â”‚      groupId: group.id,                                             â”‚
â”‚      pageIndex,                                                     â”‚
â”‚      problemNumber,        // "ë¬¸ì œ L1"                             â”‚
â”‚      displayName: problemNumber,  // â† ğŸ”´ ë¬¸ì œì˜ í•µì‹¬!              â”‚
â”‚    });                                 // "ë¬¸ì œ L1"ì„ ì§ì ‘ ì „ë‹¬      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. workSessionStore.addProblem() [329-337ì¤„]                        â”‚
â”‚                                                                     â”‚
â”‚    if (!problemData.displayName) {   // â† FALSE! (ì´ë¯¸ "ë¬¸ì œ L1")   â”‚
â”‚      // ìë™ ìƒì„± ë¡œì§ ì‹¤í–‰ ì•ˆ ë¨!                                  â”‚
â”‚    }                                                                â”‚
â”‚    // displayName = "ë¬¸ì œ L1" ê·¸ëŒ€ë¡œ ìœ ì§€                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. ë°±ì—”ë“œ add_problem API                                           â”‚
â”‚    displayName = "ë¬¸ì œ L1" â†’ ì €ì¥                                   â”‚
â”‚    problemNumber = "ë¬¸ì œ L1" â†’ ì €ì¥                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ê·¼ë³¸ ì›ì¸ ë¶„ì„

### 3.1 ë²„ê·¸ ìœ„ì¹˜

**íŒŒì¼**: `frontend/src/pages/UnifiedWorkPage.tsx`
**ìœ„ì¹˜**: 117ë²ˆ ì¤„

```typescript
// Phase 39: ê·¸ë£¹ ìƒì„± ì½œë°±
const handleGroupCreated = useCallback(async (group: ProblemGroup, pageIndex: number) => {
  if (activeTab === 'problem') {
    const problemNumber = group.problemInfo?.problemNumber || `ë¬¸ì œ ${group.id}`;
    try {
      await addProblem({
        groupId: group.id,
        pageIndex,
        problemNumber,
        displayName: problemNumber,  // ğŸ”´ ë²„ê·¸: displayNameì„ ì§ì ‘ ì „ë‹¬
      });
    }
  }
}, [...]);
```

### 3.2 ë¬¸ì œì 

| ë¬¸ì œ | ì„¤ëª… |
|------|------|
| **1. í´ë°± ê°’ì´ ë¶€ì ì ˆ** | `"ë¬¸ì œ ${group.id}"` â†’ íŒŒì‹± ë¶ˆê°€ëŠ¥í•œ í˜•ì‹ |
| **2. displayName ì§ì ‘ ì „ë‹¬** | workSessionStoreì˜ ìë™ ìƒì„± ë¡œì§ì„ ìš°íšŒ |
| **3. ì¤‘ë³µ ë¡œì§** | displayName ìƒì„± ë¡œì§ì´ ì—¬ëŸ¬ ê³³ì— ë¶„ì‚° |

### 3.3 Phase 45-Fixê°€ ì‘ë™í•˜ì§€ ì•ŠëŠ” ì´ìœ 

**workSessionStore.tsì˜ ìë™ ìƒì„± ë¡œì§**:

```typescript
addProblem: async (data) => {
  const problemData = { ...data };

  if (!problemData.displayName) {  // â† ì—¬ê¸°ì„œ ì²´í¬
    // ìë™ ìƒì„±
    const bookName = extractBookName(docName);
    const page = (problemData.pageIndex ?? 0) + 1;
    problemData.displayName = `${bookName}_p${page}_${problemData.problemNumber}`;
  }
  // ...
}
```

**ë¬¸ì œ**: `UnifiedWorkPage`ì—ì„œ `displayName: problemNumber`ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì „ë‹¬í•˜ë¯€ë¡œ,
`if (!problemData.displayName)` ì¡°ê±´ì´ **FALSE**ê°€ ë˜ì–´ ìë™ ìƒì„±ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ.

---

## 4. ì˜í–¥ ë²”ìœ„

### 4.1 ì˜í–¥ë°›ëŠ” ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤ | ì˜í–¥ |
|----------|------|
| ìƒˆ ê·¸ë£¹ ìƒì„± (problemInfo ìˆìŒ) | âš ï¸ ë¶€ë¶„ì  (problemNumberë§Œ ìˆìœ¼ë©´ "3"ì²˜ëŸ¼ ìˆ«ìë§Œ ì €ì¥) |
| ìƒˆ ê·¸ë£¹ ìƒì„± (problemInfo ì—†ìŒ) | âŒ ì‹¬ê° ("ë¬¸ì œ L1" í˜•ì‹ìœ¼ë¡œ ì €ì¥) |
| ê¸°ì¡´ ë°ì´í„° ë¡œë“œ | âœ… ì •ìƒ (ì´ë¯¸ ì €ì¥ëœ ë°ì´í„° ì‚¬ìš©) |
| refreshDisplayNames í˜¸ì¶œ | âœ… ì •ìƒ (groups.jsonì—ì„œ ì¬ìƒì„±) |

### 4.2 ë‘ ê°€ì§€ ë²„ê·¸

1. **problemNumber í´ë°± ë¬¸ì œ**: `"ë¬¸ì œ ${group.id}"` â†’ ì˜ëª»ëœ í˜•ì‹
2. **displayName ìš°íšŒ ë¬¸ì œ**: ìë™ ìƒì„± ë¡œì§ì´ ë¬´ì‹œë¨

---

## 5. í•´ê²° ë°©ì•ˆ

### 5.1 ì¦‰ì‹œ ìˆ˜ì • (ê¶Œì¥)

**íŒŒì¼**: `frontend/src/pages/UnifiedWorkPage.tsx`
**ìˆ˜ì •**: displayNameì„ ì „ë‹¬í•˜ì§€ ì•ŠìŒ

```typescript
// Before (ë²„ê·¸)
await addProblem({
  groupId: group.id,
  pageIndex,
  problemNumber,
  displayName: problemNumber,  // â† ì‚­ì œ
});

// After (ìˆ˜ì •)
await addProblem({
  groupId: group.id,
  pageIndex,
  problemNumber,
  // displayName ìƒëµ â†’ workSessionStoreì—ì„œ ìë™ ìƒì„±
});
```

### 5.2 í´ë°± ê°’ ê°œì„  (ì¶”ê°€ ê¶Œì¥)

```typescript
// Before
const problemNumber = group.problemInfo?.problemNumber || `ë¬¸ì œ ${group.id}`;

// After - ë” ë‚˜ì€ í´ë°±
const problemNumber = group.problemInfo?.problemNumber || group.id;
// "L1" â†’ workSessionStoreì—ì„œ "ë² ì´ì§ìˆ_p10_L1" í˜•ì‹ìœ¼ë¡œ ìë™ ìƒì„±ë¨
```

### 5.3 ì™„ì „í•œ ìˆ˜ì •

```typescript
const handleGroupCreated = useCallback(async (group: ProblemGroup, pageIndex: number) => {
  if (activeTab === 'problem') {
    // Phase 45-Fix-2: problemNumberë§Œ ì¶”ì¶œ, displayNameì€ ìë™ ìƒì„±ì— ë§¡ê¹€
    const problemNumber = group.problemInfo?.problemNumber || group.id;
    try {
      await addProblem({
        groupId: group.id,
        pageIndex,
        problemNumber,
        // displayName ìƒëµ â†’ workSessionStore.addProblem()ì—ì„œ ìë™ ìƒì„±:
        // "${bookName}_p${page}_${problemNumber}"
      });
      showToast(`${problemNumber}ë²ˆ ë¬¸ì œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
    } catch (error) {
      // ...
    }
  }
}, [...]);
```

---

## 6. ê²€ì¦ ê³„íš

### 6.1 ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸

1. **ìƒˆ ê·¸ë£¹ ìƒì„± (problemInfo ìˆìŒ)**
   - ì˜ˆìƒ: "ë² ì´ì§ìˆ_p10_3" â†’ í‘œì‹œ: "ë² ì´ì§ìˆ Â· 10p Â· 3ë²ˆ"

2. **ìƒˆ ê·¸ë£¹ ìƒì„± (problemInfo ì—†ìŒ)**
   - ì˜ˆìƒ: "ë² ì´ì§ìˆ_p10_L1" â†’ í‘œì‹œ: "ë² ì´ì§ìˆ Â· 10p Â· L1ë²ˆ"

3. **ê¸°ì¡´ ë ˆê±°ì‹œ ë°ì´í„°**
   - refreshDisplayNamesë¡œ ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥

### 6.2 í™•ì¸ í¬ì¸íŠ¸

- [ ] ë°±ì—”ë“œ ë¡œê·¸ì—ì„œ displayName í™•ì¸
- [ ] ì„¸ì…˜ JSON íŒŒì¼ì—ì„œ displayName í˜•ì‹ í™•ì¸
- [ ] ì¢Œì¸¡ ì‚¬ì´ë“œë°” í‘œì‹œ í™•ì¸

---

## 7. ê²°ë¡ 

### 7.1 ë²„ê·¸ ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ìœ„ì¹˜** | `UnifiedWorkPage.tsx:117` |
| **ì›ì¸** | `displayName: problemNumber` ì§ì ‘ ì „ë‹¬ |
| **ì˜í–¥** | workSessionStoreì˜ ìë™ ìƒì„± ë¡œì§ ìš°íšŒ |
| **ì‹¬ê°ë„** | ğŸ”´ ë†’ìŒ (ëª¨ë“  ìƒˆ ë¬¸ì œ ë“±ë¡ì— ì˜í–¥) |

### 7.2 ìˆ˜ì • ì‚¬í•­

1. **í•„ìˆ˜**: `displayName: problemNumber` ë¼ì¸ ì‚­ì œ
2. **ê¶Œì¥**: í´ë°± ê°’ì„ `group.id`ë¡œ ë³€ê²½

### 7.3 ì˜ˆìƒ ê²°ê³¼

```
ìˆ˜ì • ì „: "ë¬¸ì œ Â· L1ë²ˆ"
ìˆ˜ì • í›„: "ë² ì´ì§ìˆ Â· 10p Â· L1ë²ˆ"
```

---

*ì‘ì„±ì: Claude Code (Opus)*
*Phase: 45-Fix-2 Deep Analysis*
