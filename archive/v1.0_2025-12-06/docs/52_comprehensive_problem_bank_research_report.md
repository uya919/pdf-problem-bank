# 종합 문제은행 시스템 구축 연구 리포트

## Phase 21+ : 차세대 문제은행 플랫폼 설계

**작성일**: 2025-11-30
**요청**: 토스/애플(UX) + 수학비서/매쓰플랫(문제은행) + HML/HWPX/PDF 라벨링 통합
**분석 수준**: Deep Research (Opus ThinkHarder)

---

## 목차

1. [Executive Summary](#1-executive-summary)
2. [현재 시스템 분석](#2-현재-시스템-분석)
3. [벤치마킹 분석](#3-벤치마킹-분석)
4. [통합 아키텍처 설계](#4-통합-아키텍처-설계)
5. [UI/UX 설계 원칙](#5-uiux-설계-원칙)
6. [데이터 모델 설계](#6-데이터-모델-설계)
7. [자동 분류 시스템](#7-자동-분류-시스템)
8. [구현 로드맵](#8-구현-로드맵)
9. [리스크 분석](#9-리스크-분석)
10. [결론 및 권장사항](#10-결론-및-권장사항)

---

## 1. Executive Summary

### 비전
**"학원 선생님이 5분 만에 맞춤형 시험지를 만들 수 있는 문제은행 시스템"**

### 핵심 목표
| 목표 | 설명 |
|------|------|
| **사용성** | 토스 수준의 직관적 UX - 비개발자도 즉시 사용 가능 |
| **분류 체계** | 수학비서의 19,543개 유형 분류 시스템 도입 |
| **문제 입력** | HML/HWPX/PDF 파일에서 문제 자동 추출 및 라벨링 |
| **검색/필터** | 학년, 단원, 유형, 난이도, 태그 기반 다중 필터링 |

### 차별화 포인트
```
수학비서/매쓰플랫: 이미 분류된 문제 구매 → 비용 발생, 커스터마이징 불가
우리 시스템: 내가 가진 자료를 직접 분류 → 무료, 완전한 소유권
```

---

## 2. 현재 시스템 분석

### 2.1 현재 아키텍처
```
┌─────────────────────────────────────────────────────────┐
│                    현재 시스템                           │
├─────────────────────────────────────────────────────────┤
│  PDF/HML/HWPX 업로드                                    │
│         ↓                                               │
│  페이지별 이미지 변환                                    │
│         ↓                                               │
│  블록 검출 (OpenCV)                                     │
│         ↓                                               │
│  수동 그룹핑 (Konva Canvas)                             │
│         ↓                                               │
│  문제 이미지 크롭 + 메타데이터 저장                      │
│         ↓                                               │
│  dataset_root/{document_id}/problems/                   │
└─────────────────────────────────────────────────────────┘
```

### 2.2 현재 데이터 모델

#### ProblemInfo (TypeScript)
```typescript
interface ProblemInfo {
  bookName: string;        // "수학의 바이블 개념on"
  course: string;          // "공통수학2"
  page: number;            // 464
  problemNumber: string;   // "3", "예제2"
  displayName?: string;    // 자동 생성
  difficulty?: 'easy' | 'medium' | 'hard';
  problemType?: string;
  tags?: string[];
}
```

#### 현재 한계점
| 문제점 | 설명 |
|--------|------|
| **평면적 분류** | 책/페이지 기반 → 단원/유형 기반 검색 불가 |
| **수동 입력** | 모든 메타데이터를 사용자가 직접 입력 |
| **검색 불가** | 유형별 문제 검색 기능 없음 |
| **문제은행 부재** | 개별 문서 관리만 가능, 통합 문제은행 없음 |

---

## 3. 벤치마킹 분석

### 3.1 수학비서 (mathsecr.com) 분석

#### 분류 체계 구조 (5단계 계층)
```
Level 1: 학년/과목 (17개)
    └── Level 2: 대단원 (130개)
            └── Level 3: 중단원 (380개)
                    └── Level 4: 소단원 (2,842개)
                            └── Level 5: 유형 (19,543개)
```

#### 학년별 상세 통계
| 구분 | 학년/과목 | 대단원 | 유형 수 |
|------|----------|--------|--------|
| **중등** | 중1-1, 중1-2, 중2-1, 중2-2, 중3-1, 중3-2 | 52 | 7,003 |
| **고등 공통** | 공통수학1, 공통수학2 | 16 | 2,890 |
| **고등 선택** | 대수, 미적분, 확률과통계, 기하 | 58 | 9,649 |
| **진로선택** | 수학과제탐구, 실용수학, 경제수학, 인공지능수학 | 4 | - |
| **합계** | 17 | 130 | 19,543 |

#### 문제 카드 UI 요소
```
┌──────────────────────────────────────────────────┐
│ [1] [객관식] [Pro] [정답O] [해설O] [●보통 4]      │
├──────────────────────────────────────────────────┤
│ [문제 이미지]                                     │
├──────────────────────────────────────────────────┤
│ 출처: 2020년 교육청 고1공통 6월 > 8 > [3.00점]   │
│ 유형: 07 공통수학1 > 05 이차방정식 > 01 이차방정식│
│       > 03 이차방정식의 해2 (근대입) > 01 근대입1 │
│ 태그: [근대입 관계식] [이차방정식]               │
└──────────────────────────────────────────────────┘
```

#### 핵심 기능
| 기능 | 설명 |
|------|------|
| **나만의 DB** | 사용자가 구매한 문제 DB 관리 |
| **내 문제지** | 폴더 기반 문제지 관리 (작업공간 > 하위폴더) |
| **필터링** | 출처, 단원·유형, Tag, 연도, 난이도, 정답종류 |
| **유형별 그룹핑** | "(3문제)" 형태로 같은 유형 묶음 표시 |
| **빠른 검색** | 텍스트 및 수식 검색, 포함/배제 |

### 3.2 토스 UI/UX 원칙

#### 핵심 디자인 철학
```
┌─────────────────────────────────────────────────────┐
│              토스 디자인 원칙                        │
├─────────────────────────────────────────────────────┤
│  1. 1 Thing / 1 Page                               │
│     - 한 화면에 하나의 목적만                       │
│     - 복잡한 작업도 단계별로 분리                   │
│                                                     │
│  2. 일관성 (Consistency)                           │
│     - iOS/Android/Web 동일한 디자인                │
│     - 컴포넌트 기반 디자인 시스템 (TDS)            │
│                                                     │
│  3. 직관적 인터랙션                                │
│     - 자연스러운 애니메이션                        │
│     - 즉각적인 피드백                              │
│                                                     │
│  4. 데이터 기반 검증                               │
│     - A/B 테스트로 모든 디자인 결정                │
│     - 사용자 행동 분석                             │
└─────────────────────────────────────────────────────┘
```

#### 토스 UI 특징
| 특징 | 적용 방안 |
|------|----------|
| **대형 터치 영역** | 문제 카드 전체가 클릭 가능 |
| **명확한 시각적 계층** | 중요 정보 강조, 부가 정보 축소 |
| **스켈레톤 로딩** | 로딩 중에도 레이아웃 유지 |
| **바텀시트** | 필터, 옵션 선택에 바텀시트 활용 |
| **토스트 알림** | 작업 완료 피드백 |

### 3.3 애플 디자인 원칙

#### Human Interface Guidelines 핵심
```
1. 명확성 (Clarity)
   - 텍스트는 모든 크기에서 읽기 쉽게
   - 아이콘은 정확하고 명확하게
   - 장식은 미묘하고 적절하게

2. 존중 (Deference)
   - 콘텐츠가 주인공
   - UI는 콘텐츠를 방해하지 않음
   - 베젤리스, 풀스크린 활용

3. 깊이 (Depth)
   - 시각적 레이어로 계층 표현
   - 현실적인 모션
   - 터치로 발견하는 즐거움
```

---

## 4. 통합 아키텍처 설계

### 4.1 새로운 시스템 아키텍처
```
┌─────────────────────────────────────────────────────────────────┐
│                    차세대 문제은행 시스템                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐       │
│  │  문제 입력   │    │  문제은행    │    │  시험지 생성  │       │
│  │  (Labeling)  │ →  │  (Problem    │ →  │  (Worksheet  │       │
│  │              │    │   Bank)      │    │   Builder)   │       │
│  └──────────────┘    └──────────────┘    └──────────────┘       │
│         │                   │                   │                │
│         ▼                   ▼                   ▼                │
│  ┌─────────────────────────────────────────────────────┐        │
│  │              통합 데이터베이스                        │        │
│  │  - 문제 (Problems)                                   │        │
│  │  - 분류 체계 (Classification Tree)                   │        │
│  │  - 태그 (Tags)                                       │        │
│  │  - 시험지 (Worksheets)                               │        │
│  │  - 학생 (Students) - 향후 확장                       │        │
│  └─────────────────────────────────────────────────────┘        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 4.2 모듈 구성

#### Module 1: 문제 입력 (Problem Labeler)
```
현재 시스템 기반 + 개선
- PDF 업로드 → 페이지 이미지 변환
- HML/HWPX 파싱 → 문제 자동 추출
- 블록 검출 → 문제 영역 자동 인식
- 수동 그룹핑 → 문제 단위 확정
- [NEW] 분류 선택기 → 수학비서 분류 체계 적용
- [NEW] 자동 분류 제안 → ML 기반 유형 추천
```

#### Module 2: 문제은행 (Problem Bank)
```
수학비서 스타일 + 토스 UX
- 5단계 분류 트리 네비게이션
- 다중 필터 (학년, 단원, 유형, 난이도, 태그)
- 문제 카드 그리드/리스트 뷰
- 유형별 그룹핑 표시
- 즐겨찾기, 최근 사용
- 통합 검색 (텍스트 + 수식)
```

#### Module 3: 시험지 생성 (Worksheet Builder)
```
드래그&드롭 기반 시험지 제작
- 문제은행에서 문제 선택
- 시험지 레이아웃 편집
- 난이도 배분 자동 조절
- PDF/HWP 내보내기
- 정답지/해설지 자동 생성
```

### 4.3 화면 구성 (IA: Information Architecture)
```
📁 홈 (Dashboard)
├── 📊 통계 요약 (총 문제 수, 최근 추가, 자주 사용)
├── 🔔 알림 (새 기능, 업데이트)
└── ⚡ 빠른 작업 (문제 추가, 시험지 생성)

📁 문제은행 (Problem Bank)
├── 🗂️ 분류별 보기
│   ├── 학년 선택 (중1~고3)
│   ├── 대단원 선택
│   ├── 중단원 선택
│   ├── 소단원 선택
│   └── 유형 선택
├── 🔍 검색
├── 🏷️ 태그별 보기
├── ⭐ 즐겨찾기
└── 🕐 최근 사용

📁 문제 입력 (Labeler)
├── 📄 새 파일 업로드
├── 📋 진행 중인 라벨링
└── ✅ 완료된 문서

📁 시험지 (Worksheets)
├── 📝 새 시험지 만들기
├── 📂 내 시험지
│   ├── 폴더 구조 (수학비서 스타일)
│   └── 최근 편집
└── 📤 내보내기 기록

📁 설정 (Settings)
├── 👤 프로필
├── 🏫 학원 정보
├── 📊 데이터 관리
└── ⚙️ 환경설정
```

---

## 5. UI/UX 설계 원칙

### 5.1 디자인 시스템 정의

#### 컬러 팔레트
```css
/* Primary Colors - 토스 블루 계열 */
--primary-50:  #E8F3FF;
--primary-100: #C9E2FF;
--primary-500: #3182F6;  /* Main */
--primary-600: #1B64DA;
--primary-700: #1957C2;

/* Semantic Colors */
--success: #00C853;
--warning: #FF9800;
--error:   #F44336;
--info:    #2196F3;

/* Neutral Colors */
--gray-50:  #F9FAFB;
--gray-100: #F2F4F6;
--gray-200: #E5E8EB;
--gray-500: #8B95A1;
--gray-900: #191F28;

/* Difficulty Colors */
--easy:     #4CAF50;  /* 쉬움 - 녹색 */
--medium:   #FF9800;  /* 보통 - 주황 */
--hard:     #F44336;  /* 어려움 - 빨강 */
--expert:   #9C27B0;  /* 매우어려움 - 보라 */
```

#### 타이포그래피
```css
/* Font Family */
--font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;

/* Font Sizes */
--text-xs:   12px;   /* 보조 정보 */
--text-sm:   14px;   /* 본문 소 */
--text-base: 16px;   /* 본문 기본 */
--text-lg:   18px;   /* 강조 */
--text-xl:   20px;   /* 소제목 */
--text-2xl:  24px;   /* 제목 */
--text-3xl:  30px;   /* 대제목 */

/* Font Weights */
--font-regular:  400;
--font-medium:   500;
--font-semibold: 600;
--font-bold:     700;
```

#### 간격 시스템
```css
/* Spacing Scale (4px 기반) */
--space-1:  4px;
--space-2:  8px;
--space-3:  12px;
--space-4:  16px;
--space-5:  20px;
--space-6:  24px;
--space-8:  32px;
--space-10: 40px;
--space-12: 48px;
--space-16: 64px;
```

### 5.2 핵심 UI 컴포넌트

#### 문제 카드 (ProblemCard)
```
┌─────────────────────────────────────────────────────────┐
│ ┌─────┐                                                 │
│ │ 1   │  [객관식]  [정답O] [해설O]      ● 보통 4       │
│ └─────┘                                                 │
│ ┌─────────────────────────────────────────────────────┐ │
│ │                                                     │ │
│ │              [문제 이미지 썸네일]                    │ │
│ │                                                     │ │
│ └─────────────────────────────────────────────────────┘ │
│                                                         │
│ 📍 07 공통수학1 > 이차방정식 > 근과 계수의 관계        │
│                                                         │
│ 📚 수학의 바이블 개념on p.464                          │
│                                                         │
│ 🏷️ [이차방정식] [근대입] [관계식]                      │
│                                                         │
│ [⭐ 즐겨찾기]  [📋 시험지에 추가]  [⋮]                 │
└─────────────────────────────────────────────────────────┘
```

#### 분류 트리 (ClassificationTree)
```
┌─────────────────────────────────────┐
│ 📚 분류 선택                    [×] │
├─────────────────────────────────────┤
│ ▼ 07 공통수학1                      │
│   ├─ ▼ 05 이차방정식               │
│   │   ├─ ▼ 01 이차방정식           │
│   │   │   ├─ 01 이차방정식의 해1    │
│   │   │   ├─ 02 이차방정식의 해2    │  ← 선택 가능
│   │   │   └─ 03 근대입1 (123)      │  ← (문제 수)
│   │   ├─ 02 판별식               │
│   │   └─ 03 근과 계수의 관계     │
│   ├─ 06 이차함수                   │
│   └─ ...                           │
├─────────────────────────────────────┤
│ 선택됨: 공통수학1 > 이차방정식 >    │
│         이차방정식 > 근대입1        │
│                                     │
│        [취소]  [선택 완료]          │
└─────────────────────────────────────┘
```

#### 필터 바텀시트 (FilterBottomSheet)
```
┌─────────────────────────────────────────────────────────┐
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━                          │
│                                                         │
│ 필터                                        [초기화]   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 학년                                                    │
│ ┌───────┬───────┬───────┬───────┬───────┬───────┐     │
│ │ 중1   │ 중2   │ 중3   │ 고1   │ 고2   │ 고3   │     │
│ └───────┴───────┴───────┴───────┴───────┴───────┘     │
│                                                         │
│ 난이도                                                  │
│ ┌───────┬───────┬───────┬───────┬───────┐             │
│ │ 1-2   │ 3-4   │ 5-6   │ 7-8   │ 9-10  │             │
│ │ 쉬움  │ 보통  │ 어려움│ 킬러  │ 최고  │             │
│ └───────┴───────┴───────┴───────┴───────┘             │
│                                                         │
│ 문제 유형                                               │
│ ┌───────────────┬───────────────┐                     │
│ │ ○ 객관식     │ ○ 주관식     │                     │
│ └───────────────┴───────────────┘                     │
│                                                         │
│ 출처                                                    │
│ [교육청 ▼] [연도: 2020~2024 ▼]                        │
│                                                         │
│                    [필터 적용 (152)]                    │
└─────────────────────────────────────────────────────────┘
```

### 5.3 인터랙션 패턴

#### 페이지 전환
```
- 수평 슬라이드: 같은 레벨 이동 (탭 전환)
- 수직 슬라이드: 상세 페이지 진입
- 페이드: 모달, 바텀시트
- 스케일: 문제 카드 확대
```

#### 피드백
```
- 탭 피드백: 100ms 하이라이트
- 스와이프: 제스처 힌트
- 로딩: 스켈레톤 UI
- 완료: 토스트 + 햅틱 (모바일)
- 에러: 인라인 에러 메시지
```

---

## 6. 데이터 모델 설계

### 6.1 핵심 엔티티

#### Problem (문제)
```typescript
interface Problem {
  // 식별자
  id: string;                    // UUID

  // 분류 정보 (수학비서 분류 체계)
  classification: {
    gradeId: number;             // 학년 ID (07: 공통수학1)
    majorUnitId: number;         // 대단원 ID
    middleUnitId: number;        // 중단원 ID
    minorUnitId: number;         // 소단원 ID
    typeId: number;              // 유형 ID

    // 캐시된 텍스트 (검색/표시용)
    gradeName: string;           // "공통수학1"
    fullPath: string;            // "공통수학1 > 이차방정식 > ..."
  };

  // 문제 속성
  questionType: 'multiple_choice' | 'short_answer' | 'essay';
  difficulty: number;            // 1-10
  points?: number;               // 배점

  // 콘텐츠
  imageUrl: string;              // 문제 이미지 경로
  thumbnailUrl: string;          // 썸네일 경로
  latex?: string;                // LaTeX 수식 (HML에서 추출시)
  choices?: string[];            // 객관식 선지
  answer?: string;               // 정답
  solution?: string;             // 해설
  solutionImageUrl?: string;     // 해설 이미지

  // 출처 정보
  source: {
    type: 'book' | 'exam' | 'custom';
    name: string;                // "수학의 바이블" 또는 "2020 교육청 6월"
    page?: number;
    problemNumber?: string;
    year?: number;
    organization?: string;       // "교육청", "평가원", "수능"
  };

  // 태그
  tags: string[];

  // 메타데이터
  createdAt: Date;
  updatedAt: Date;
  createdBy: string;             // 사용자 ID

  // 사용 통계
  usageCount: number;            // 시험지에 사용된 횟수
  lastUsedAt?: Date;
  isFavorite: boolean;
}
```

#### ClassificationNode (분류 노드)
```typescript
interface ClassificationNode {
  id: number;
  parentId: number | null;
  text: string;                  // "이차방정식"
  fullText: string;              // "03 이차방정식의 해2 (근대입)"
  level: 1 | 2 | 3 | 4 | 5;      // 계층 레벨
  order: number;                 // 정렬 순서
  problemCount: number;          // 하위 문제 수 (캐시)
  children?: ClassificationNode[];
}
```

#### Worksheet (시험지)
```typescript
interface Worksheet {
  id: string;

  // 기본 정보
  title: string;
  description?: string;
  folderId: string;              // 폴더 ID

  // 문제 구성
  problems: {
    problemId: string;
    order: number;
    customPoints?: number;       // 커스텀 배점
  }[];

  // 설정
  settings: {
    showAnswer: boolean;
    showSolution: boolean;
    layout: 'single' | 'double';  // 1단/2단
    paperSize: 'A4' | 'B4' | 'Letter';
  };

  // 메타데이터
  createdAt: Date;
  updatedAt: Date;
  totalPoints: number;           // 총점
  problemCount: number;          // 문제 수
}
```

#### Folder (폴더)
```typescript
interface Folder {
  id: string;
  parentId: string | null;
  name: string;
  type: 'my_problems' | 'worksheets';  // 문제/시험지 구분
  order: number;
  itemCount: number;             // 하위 항목 수
  createdAt: Date;
  updatedAt: Date;
}
```

### 6.2 저장소 구조

```
dataset_root/
├── classification/
│   └── math_classification_tree.json    # 수학비서 분류 체계
│
├── problems/
│   ├── index.json                       # 전체 문제 인덱스
│   └── {problem_id}/
│       ├── problem.json                 # 문제 메타데이터
│       ├── image.png                    # 원본 이미지
│       ├── thumbnail.png                # 썸네일
│       └── solution.png                 # 해설 이미지 (있는 경우)
│
├── worksheets/
│   ├── index.json                       # 시험지 인덱스
│   └── {worksheet_id}/
│       ├── worksheet.json               # 시험지 메타데이터
│       └── exports/                     # 내보내기 파일
│           ├── worksheet.pdf
│           └── answer.pdf
│
├── folders/
│   └── structure.json                   # 폴더 구조
│
└── documents/                           # 기존 문서 라벨링 데이터
    └── {document_id}/
        ├── pages/
        ├── blocks/
        └── groups/
```

---

## 7. 자동 분류 시스템

### 7.1 분류 제안 알고리즘

#### Phase 1: 규칙 기반 분류 (즉시 구현 가능)
```python
def suggest_classification(problem_text: str, source_info: dict) -> list[Suggestion]:
    suggestions = []

    # 1. 출처 기반 추론
    if source_info.get('name'):
        # "2020 교육청 고1" → 공통수학1/2 범위
        grade = extract_grade(source_info['name'])
        if grade:
            suggestions.append(grade_to_classification(grade))

    # 2. 키워드 기반 추론
    keywords = extract_keywords(problem_text)
    for keyword in keywords:
        if classification := KEYWORD_TO_CLASSIFICATION.get(keyword):
            suggestions.append(classification)

    # 3. 수식 패턴 기반 추론
    equations = extract_equations(problem_text)
    for eq in equations:
        if classification := pattern_match_equation(eq):
            suggestions.append(classification)

    return rank_suggestions(suggestions)
```

#### 키워드-분류 매핑 (예시)
```python
KEYWORD_TO_CLASSIFICATION = {
    # 대단원 레벨 키워드
    "다항식": {"major": "다항식의 연산"},
    "방정식": {"major": "방정식과 부등식"},
    "이차방정식": {"major": "이차방정식"},
    "이차함수": {"major": "이차함수"},
    "삼각함수": {"major": "삼각함수"},
    "수열": {"major": "수열"},
    "미분": {"major": "미분"},
    "적분": {"major": "적분"},
    "확률": {"major": "확률"},
    "통계": {"major": "통계"},

    # 세부 유형 키워드
    "판별식": {"minor": "판별식"},
    "근과 계수의 관계": {"minor": "근과 계수의 관계"},
    "점근선": {"minor": "점근선"},
    "극값": {"minor": "극값"},
    "정적분": {"minor": "정적분"},
}
```

#### Phase 2: ML 기반 분류 (향후 구현)
```
1. 학습 데이터 수집
   - 사용자가 분류한 문제 데이터 축적
   - 수학비서 분류 체계와 문제 텍스트 매핑

2. 모델 아키텍처
   - 텍스트: KoBERT 또는 한국어 특화 모델
   - 수식: LaTeX 토큰화 후 임베딩
   - Multi-label Classification

3. 추론 파이프라인
   - 문제 이미지 → OCR → 텍스트 추출
   - 텍스트 → 모델 → Top-5 분류 제안
   - 사용자 선택 → 학습 데이터로 피드백
```

### 7.2 분류 선택 UX 플로우

```
문제 라벨링 완료
       │
       ▼
┌─────────────────────────────────────┐
│   이 문제의 분류를 선택해주세요      │
│                                     │
│   💡 AI 추천                        │
│   ┌─────────────────────────────┐  │
│   │ 1. 이차방정식 > 근대입 (87%) │  │
│   │ 2. 이차방정식 > 판별식 (12%) │  │
│   │ 3. 직접 선택하기             │  │
│   └─────────────────────────────┘  │
│                                     │
│   [1번 선택]  [직접 선택]           │
└─────────────────────────────────────┘
       │
       ▼ (직접 선택 시)
┌─────────────────────────────────────┐
│   분류 트리에서 선택                 │
│   (5단계 드릴다운)                   │
└─────────────────────────────────────┘
       │
       ▼
┌─────────────────────────────────────┐
│   태그 추가 (선택)                   │
│   ┌─────────────────────────────┐  │
│   │ [+ 새 태그] [근대입] [관계식]│  │
│   └─────────────────────────────┘  │
│                                     │
│   난이도 선택                        │
│   ○1 ○2 ●3 ○4 ○5 ○6 ○7 ○8 ○9 ○10  │
│                                     │
│           [저장]                     │
└─────────────────────────────────────┘
```

---

## 8. 구현 로드맵

### 8.1 Phase 구성

```
┌─────────────────────────────────────────────────────────────────┐
│                       구현 로드맵                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  Phase A: 데이터 기반 구축                                       │
│  ├── A-1: 분류 체계 DB 구축 (수학비서 데이터 통합)              │
│  ├── A-2: Problem 데이터 모델 마이그레이션                      │
│  └── A-3: 분류 선택 컴포넌트 개발                               │
│                                                                  │
│  Phase B: 문제은행 UI                                            │
│  ├── B-1: 메인 레이아웃 리디자인 (토스 스타일)                  │
│  ├── B-2: 문제 카드 컴포넌트                                    │
│  ├── B-3: 분류 트리 네비게이션                                  │
│  ├── B-4: 필터 시스템 (바텀시트)                                │
│  └── B-5: 검색 기능                                             │
│                                                                  │
│  Phase C: 문제 라벨링 개선                                       │
│  ├── C-1: 분류 선택 통합                                        │
│  ├── C-2: 태그 시스템                                           │
│  ├── C-3: 난이도 설정                                           │
│  └── C-4: 자동 분류 제안 (규칙 기반)                            │
│                                                                  │
│  Phase D: 시험지 생성                                            │
│  ├── D-1: 시험지 빌더 UI                                        │
│  ├── D-2: 드래그&드롭 편집                                      │
│  ├── D-3: PDF 내보내기                                          │
│  └── D-4: 정답지/해설지 생성                                    │
│                                                                  │
│  Phase E: 고급 기능                                              │
│  ├── E-1: ML 기반 자동 분류                                     │
│  ├── E-2: 유사 문제 추천                                        │
│  ├── E-3: 학생 관리 연동                                        │
│  └── E-4: 통계 대시보드                                         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 8.2 Phase별 상세 계획

#### Phase A: 데이터 기반 구축

**A-1: 분류 체계 DB 구축**
```
작업 내용:
- 수학비서 분류 데이터 (22,927 노드) JSON 구조화
- SQLite 또는 JSON 파일로 저장
- 검색 인덱스 구축

파일 구조:
backend/
├── data/
│   └── classification/
│       ├── math_tree.json          # 전체 트리
│       └── grade_index.json        # 학년별 인덱스

API 엔드포인트:
- GET /api/classification/tree       # 전체 트리
- GET /api/classification/{id}       # 노드 상세
- GET /api/classification/search     # 검색
```

**A-2: Problem 데이터 모델 마이그레이션**
```
기존: ProblemGroup (그룹 중심)
신규: Problem (문제 중심) + Classification

마이그레이션 전략:
1. 새 Problem 테이블/파일 생성
2. 기존 ProblemGroup에서 데이터 추출
3. classification 필드 추가 (초기값: null)
4. 점진적 분류 작업
```

#### Phase B: 문제은행 UI

**B-1: 메인 레이아웃 리디자인**
```tsx
// 새로운 레이아웃 구조
<AppShell>
  <Header>
    <Logo />
    <GlobalSearch />
    <UserMenu />
  </Header>

  <Sidebar>
    <Navigation>
      <NavItem icon="home">홈</NavItem>
      <NavItem icon="database">문제은행</NavItem>
      <NavItem icon="edit">라벨링</NavItem>
      <NavItem icon="file">시험지</NavItem>
    </Navigation>

    <ClassificationTree />  {/* 분류 트리 */}
  </Sidebar>

  <Main>
    <FilterBar />
    <ProblemGrid />
    <Pagination />
  </Main>
</AppShell>
```

**B-2: 문제 카드 컴포넌트**
```tsx
interface ProblemCardProps {
  problem: Problem;
  view: 'grid' | 'list';
  onSelect: () => void;
  onFavorite: () => void;
  onAddToWorksheet: () => void;
}

// 토스 스타일 카드 디자인
// - 라운드 코너 (12px)
// - 미묘한 그림자
// - 호버 시 살짝 떠오름
// - 클릭 시 하이라이트
```

### 8.3 기술 스택 업데이트

#### 프론트엔드 추가 라이브러리
```json
{
  "dependencies": {
    // 기존 유지
    "react": "^18.2.0",
    "react-konva": "^18.2.10",
    "@tanstack/react-query": "^5.0.0",

    // 새로 추가
    "@radix-ui/react-dialog": "^1.0.0",      // 모달, 바텀시트
    "@radix-ui/react-dropdown-menu": "^2.0.0",
    "@radix-ui/react-select": "^2.0.0",
    "@radix-ui/react-checkbox": "^1.0.0",
    "react-virtual": "^3.0.0",               // 가상화 리스트
    "fuse.js": "^7.0.0",                     // 퍼지 검색
    "framer-motion": "^10.16.0",             // 애니메이션 (이미 있음)
    "date-fns": "^2.30.0",                   // 날짜 처리
    "react-hot-toast": "^2.4.0"              // 토스트 알림
  }
}
```

#### 백엔드 추가 의존성
```python
# requirements.txt 추가
pydantic>=2.0.0          # 데이터 검증
sqlite-utils>=3.35       # SQLite 유틸리티 (선택)
python-jose>=3.3.0       # JWT (향후 인증용)
```

---

## 9. 리스크 분석

### 9.1 기술적 리스크

| 리스크 | 영향도 | 발생확률 | 대응 방안 |
|--------|--------|----------|----------|
| **대용량 분류 트리 렌더링 성능** | 높음 | 중간 | 가상화 리스트, 지연 로딩 |
| **문제 이미지 저장 공간** | 중간 | 높음 | 썸네일 최적화, 클라우드 옵션 |
| **OCR 정확도 (자동 분류용)** | 중간 | 높음 | 규칙 기반 우선, ML은 점진 도입 |
| **기존 데이터 마이그레이션** | 높음 | 낮음 | 병렬 운영 기간, 롤백 계획 |

### 9.2 UX 리스크

| 리스크 | 영향도 | 발생확률 | 대응 방안 |
|--------|--------|----------|----------|
| **분류 선택 피로도** | 높음 | 중간 | 자동 제안, 최근 사용 기억 |
| **학습 곡선** | 중간 | 중간 | 온보딩 투어, 도움말 |
| **모바일 사용성** | 중간 | 높음 | 반응형 우선, 터치 최적화 |

### 9.3 사업적 리스크

| 리스크 | 영향도 | 발생확률 | 대응 방안 |
|--------|--------|----------|----------|
| **수학비서 분류 체계 변경** | 높음 | 낮음 | 버전 관리, 매핑 테이블 |
| **저작권 이슈 (문제 이미지)** | 높음 | 낮음 | 학원 내부 사용 명시 |

---

## 10. 결론 및 권장사항

### 10.1 핵심 결론

#### 구현 가능성: **높음** ✅

```
1. 기술적 실현 가능성
   - 수학비서 분류 데이터: 이미 추출 완료 (22,927 노드)
   - 토스 스타일 UI: React + TailwindCSS로 충분히 구현 가능
   - 현재 시스템 기반: HML/PDF 파싱, 블록 검출 등 핵심 기능 완료

2. 차별화 포인트
   - 수학비서: 문제 구매 필요 → 우리: 내 자료 직접 분류
   - 매쓰플랫: 복잡한 UI → 우리: 토스 수준의 직관적 UX
   - 기존 시스템: 문서 단위 → 우리: 통합 문제은행

3. 예상 효과
   - 문제 검색 시간: 5분 → 30초
   - 시험지 제작 시간: 30분 → 5분
   - 문제 재사용률: 낮음 → 높음
```

### 10.2 권장 구현 순서

```
우선순위 1 (Must Have) - Phase A, B
├── 분류 체계 데이터 구축
├── 문제 카드 UI 리디자인
├── 분류 선택 컴포넌트
└── 기본 필터링

우선순위 2 (Should Have) - Phase C
├── 라벨링 + 분류 통합
├── 태그 시스템
└── 규칙 기반 자동 제안

우선순위 3 (Could Have) - Phase D
├── 시험지 빌더
├── PDF 내보내기
└── 정답지 생성

우선순위 4 (Won't Have Now) - Phase E
├── ML 기반 분류
├── 유사 문제 추천
└── 학생 관리 연동
```

### 10.3 다음 단계 제안

```
1. Phase A-1 승인 및 착수
   - 분류 체계 JSON 파일 구조화
   - API 엔드포인트 설계
   - 프론트엔드 타입 정의

2. UI/UX 프로토타입
   - Figma로 주요 화면 디자인
   - 사용자 피드백 수집
   - 최종 디자인 확정

3. 점진적 마이그레이션
   - 새 시스템 병렬 개발
   - 기존 데이터 호환 유지
   - 단계별 전환
```

---

## 참고 자료

### 수학비서
- 웹사이트: https://www.mathsecr.com
- 분류 체계: 22,927 노드 (17 학년, 130 대단원, 19,543 유형)

### 토스 디자인
- [UX와 DX, 그 모든 경험을 위한 디자인 시스템](https://toss.im/slash-22/sessions/1-3)
- [토스로 보는 일관적인 UI·UX와 데이터의 중요성](https://ditoday.com/토스로-보는-일관적인-ui·ux와-데이터의-중요성/)
- [이런 것도 컴포넌트로 만들어도 될까?](https://toss.tech/article/tds-component-making)
- [토스 인터랙션 디자이너의 모든 것](https://toss.oopy.io/75f32c87-0eee-434b-8768-215efe9c976b)
- [금융 UI 바꿔놓은 토스, 디자인교육회사 만들었다](https://www.bizhankook.com/bk/article/30786)

### 2024 UX/UI 트렌드
- [2024의 UX/UI 디자인 트렌드](https://velog.io/@whwidls/2024-UXUI-디자인트렌드)
- [2024년 모바일 앱 UI/UX 디자인 트렌드 12가지](https://digit2sight.com/2024년-모바일-앱-ui-ux-디자인-트렌드-12가지/)
- [미리 보는 2024년 UX 디자인 트렌드 10가지](https://ditoday.com/미리-보는-2024년-ux-디자인-트렌드-10가지)

---

**작성**: Claude Code (Opus)
**버전**: 1.0
**최종 수정**: 2025-11-30
